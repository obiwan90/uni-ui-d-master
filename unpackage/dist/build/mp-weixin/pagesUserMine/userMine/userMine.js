"use strict";const e=require("../../common/vendor.js"),t=require("../../stores/tabStore.js"),n=require("../../stores/userInfoStore.js"),o=require("../../utils/system.js");if(!Array){(e.resolveComponent("uni-badge")+e.resolveComponent("identity-pannel")+e.resolveComponent("uni-popup")+e.resolveComponent("custom-tabbar"))()}Math||((()=>"../../uni_modules/uni-badge/components/uni-badge/uni-badge.js")+(()=>"../../components/identity-pannel/identity-pannel.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js")+(()=>"../../components/custom-tabbar/custom-tabbar.js"))();const r={__name:"userMine",setup(r){const s=e.ref(!1);e.ref(!1);const a=e.ref(!1),u=e.ref(null),i=e.ref(null),x=e.ref(!1),c=e.ref(!1);let p=!1;const g=e.ref([{price:"0",text:"账户金额"},{price:"0",text:"冻结金额"},{price:"0",text:"可用金额"}]),m=e.ref([{title:"采购订单",num:"0",values:[{image:"https://www.xzxskj.com/xcximg/icon_daifukuan@3x.png",text:"待付款",lx:"3",path:"/pagesOrder/order/order?order=3",num:"0"},{image:"https://www.xzxskj.com/xcximg/icon_daifahuo@3x.png",text:"待发货",lx:"4",path:"/pagesOrder/order/order?order=4",num:"0"},{image:"https://www.xzxskj.com/xcximg/icon_daishouhuo@3x.png",text:"待收货",lx:"5",path:"/pagesOrder/order/order?order=5",num:"0"},{image:"https://www.xzxskj.com/xcximg/icon_yishouhou1@3x.png",text:"已收货",lx:"6",path:"/pagesOrder/order/order?order=6",num:"0"},{image:"https://www.xzxskj.com/xcximg/icon_jianyiwancheng@3x.png",text:"交易完成",lx:"7",path:"/pagesOrder/order/order?order=7",num:"0"}],selected:!0},{title:"议价订单",num:"0",values:[{image:"https://www.xzxskj.com/xcximg/icon_yijiazh@3x.png",text:"议价中",lx:"2",path:"/pagesOrder/order/order?yj=2",num:"0"},{image:"https://www.xzxskj.com/xcximg/icon_yijiacg@3x.png",text:"议价成功",lx:"3",path:"/pagesOrder/order/order?yj=3",num:"0"},{image:"https://www.xzxskj.com/xcximg/icon_yijiasb@3x.png",text:"议价失败",lx:"4",path:"/pagesOrder/order/order?yj=4",num:"0"}],selected:!1},{title:"售后订单",num:"0",values:[{image:"https://www.xzxskj.com/xcximg/icon_shouhouzhong@3x.png",text:"售后中",lx:"2",path:"/pagesOrder/order/order?sh=2",num:"0"},{image:"https://www.xzxskj.com/xcximg/icon_shouhouchenggong@3x.png",text:"售后成功",lx:"3",path:"/pagesOrder/order/order?sh=3",num:"0"},{image:"https://www.xzxskj.com/xcximg/icon_shouhouzhong@3x.png",text:"售后失败",lx:"4",path:"/pagesOrder/order/order?sh=4",num:"0"}],selected:!1}]),l=e.ref([{title:"更多功能",value:[{text:"我的发布",image:"https://www.xzxskj.com/xcximg/icon__fabu@3x.png",path:"/pagesMarketCount/marketCount/marketCount"},{text:"收款账户",image:"https://www.xzxskj.com/xcximg/icon_zhanghu@3x.png",path:"/pagesPayAccount/payAccount/payAccount"},{text:"商户信息",image:"https://www.xzxskj.com/xcximg/icon_shop@3x.png",path:"/pagesMenber/menber/menber"},{text:"地址管理",image:"https://www.xzxskj.com/xcximg/icon_dizhi@3x.png",path:"/pagesAddress/address/address"},{text:"采购须知",image:"https://www.xzxskj.com/xcximg/icon_caigou@3x.png",path:"/pagesProcurementDescription/procurementDescription/procurementDescription"},{text:"成色说明",image:"https://www.xzxskj.com/xcximg/icon_chengse@3x.png",path:"/pagesFineness/fineness/fineness"},{text:"售后规则",image:"https://www.xzxskj.com/xcximg/icon_shouhou1@3x.png",path:"/pagesAftersalesRules/aftersalesRules/aftersalesRules"},{text:"平台客服",image:"https://www.xzxskj.com/xcximg/icon_kefu@3x.png"},{text:"招商加盟",image:"https://www.xzxskj.com/xcximg/icon_jiameng@3x.png"},{text:"投诉建议",image:"https://www.xzxskj.com/xcximg/icon_tousu@3x.png",path:"/pagesSuggest/suggest/suggest?title=投诉建议"},{text:"购物车",image:"https://www.xzxskj.com/xcximg/icon_car@3x.png",path:"/pagesShopCar/shopCar/shopCar"}]}]),d=e.computed((()=>{const e=m.value.find((e=>e.selected));return e?e.values:[]})),h=e.computed((()=>{const e=m.value.findIndex((e=>e.selected));return 1===e||2===e?{paddingLeft:"76rpx",paddingRight:"62rpx"}:{}})),f=()=>{console.log("Popup is closed"),u.value.close()},w=()=>{console.log("Popup is open"),a.value=!0,u.value.open()},v=t=>{e.index.navigateTo({url:t})},j=()=>{e.index.navigateTo({url:"/pagesMenber/menber/menber"})},k=()=>{s.value=!1,e.index.navigateBack({delta:getCurrentPages().length-1})},z=e=>{console.log("正在下拉...",e),e.detail.deltaY<0||(c.value=!0)},b=async()=>{p||(p=!0,c.value||(c.value=!0),i.value=await n.useUserStore().getInfo(),_(),x.value=i.value.joininfos&&i.value.joininfos.length>0,setTimeout((()=>{c.value=!1,p=!1}),1e3))},_=()=>{const t=e.index.getStorageSync("infos");t&&(m.value[0].num=t.zordernum,m.value[1].num=t.zyjordernum,m.value[2].num=t.zshordernum,m.value[0].values[0].num=t.dfk,m.value[0].values[1].num=t.dfh,m.value[0].values[2].num=t.dsh,m.value[1].values[0].num=t.yjz,m.value[2].values[0].num=t.shz)},y=()=>{console.log("刷新完成，恢复状态"),c.value=!1};return e.onMounted((()=>{i.value=JSON.parse(e.index.getStorageSync("userInfo")),_(),x.value=i.value.joininfos&&i.value.joininfos.length>0,t.useTabStore().setCurrentTabIndex(4)})),e.onLoad((e=>{e.from&&"identity"===e.from&&(s.value=!0)})),e.onShow((()=>{t.useTabStore().setCurrentTabIndex(4)})),(t,n)=>e.e({a:e.unref(s)},e.unref(s)?{b:e.unref(s),c:e.o(k)}:{},{d:e.unref(o.getStatusBarHeight)()+"px",e:e.unref(o.getTitleBarHeight)()+"px",f:e.unref(o.getLeftIconLeft)()+"px",g:e.unref(i)},e.unref(i)?e.e({h:""===e.unref(i).img?"https://www.xzxskj.com/xcximg/132.jpg":"https://www.xzxskj.com"+e.unref(i).img,i:e.t(""===e.unref(i).nik_name?"微信用户":e.unref(i).nik_name),j:e.t(e.unref(i).phone),k:e.o(j),l:e.unref(x)},e.unref(x)?{m:e.o(w)}:{}):{},{n:e.o((e=>v("/pagesAccount/account/account?from=user"))),o:e.f(e.unref(g),((t,n,o)=>({a:e.t(t.price),b:e.t(t.text),c:n}))),p:e.f(e.unref(m),((t,n,o)=>({a:e.t(t.title),b:t.selected?1:"",c:"c6852d63-0-"+o,d:e.p({size:"small",text:t.num,inverted:"0"===t.num||t.selected,absolute:"rightTop",type:"error","custom-style":{color:"#ffffff"}}),e:n,f:e.o((e=>(e=>{m.value.forEach(((t,n)=>t.selected=n===e))})(n)),n)}))),q:e.f(e.unref(d),((t,n,o)=>({a:t.image,b:"c6852d63-1-"+o,c:e.p({size:"small",text:t.num,inverted:"0"===t.num,absolute:"rightTop",type:"error","custom-style":{color:"#ffffff"}}),d:e.t(t.text),e:n,f:e.o((e=>v(t.path)),n)}))),r:e.s(e.unref(h)),s:e.f(e.unref(l),((n,o,r)=>({a:e.t(n.title),b:e.f(n.value,((n,o,r)=>e.e({a:n.image,b:e.t(n.text),c:"平台客服"===n.text},"平台客服"===n.text?{d:e.o(((...e)=>t.onContact&&t.onContact(...e)),o)}:{},{e:o,f:e.o((e=>v(n.path)),o)}))),c:o}))),t:e.unref(c),v:e.o(z),w:e.o(b),x:e.o(y),y:e.unref(a)},e.unref(a)?{z:e.o(f)}:{},{A:e.sr(u,"c6852d63-2",{k:"identityPopup"}),B:e.o(f),C:e.o(t.change),D:e.p({"background-color":"rgba(0,0,0,0)","is-mask-click":!0,"safe-area:false":!0,type:"center"})})}},s=e._export_sfc(r,[["__scopeId","data-v-c6852d63"]]);wx.createPage(s);
