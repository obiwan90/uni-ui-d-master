"use strict";const e=require("../../common/vendor.js"),t=require("../../stores/tabStore.js"),o=require("../../stores/userInfoStore.js"),n=require("../../stores/menuPermissionStore.js"),a=require("../../utils/system.js");if(!Array){(e.resolveComponent("identity-pannel")+e.resolveComponent("uni-popup")+e.resolveComponent("custom-tabbar"))()}Math||((()=>"../../components/identity-pannel/identity-pannel.js")+(()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js")+(()=>"../../components/custom-tabbar/custom-tabbar.js"))();const u={__name:"admin",setup(u){const s=n.usePermissionStore();e.ref([]);const r=e.ref(!1),i=t=>{console.log("e:",t),r.value=!1,e.index.showModal({content:"角色已保存",showCancel:!1,success:t=>{t.cancel||(console.log("用户点击了确认"),e.index.navigateBack({delta:getCurrentPages().length-1}))}})},x=e.ref(null),c=e.ref(!1),m=e.ref(!1),g=e.ref(null),p=()=>{console.log("Popup is closed"),g.value.close()},h=e=>{m.value=e.show},l=()=>{console.log("Popup is open"),m.value=!0,g.value.open()},d=e.ref([{text:"实时库存",value:"2585"},{text:"实时销量",value:"545"},{text:"实时售额",value:"120654"},{text:"今日上架",value:"255"}]),w=e.ref([{title:"商品管理",menuAuthority:"productManager",value:[{text:"商品录入",image:"https://www.xzxskj.com/xcximg/icon_luru@3x.png",path:"/pagesProductInput/productInput/productInput",menuAuthority:"productInput"},{text:"功能检测",image:"https://www.xzxskj.com/xcximg/icon_luru@3x.png",path:"/pagesFuncCheck/funcCheck/funcCheck",menuAuthority:"funcCheck"},{text:"维修检测",image:"https://www.xzxskj.com/xcximg/icon_luru@3x.png",path:"/pagesMaintenanceInput/maintenanceInput/maintenanceInput",menuAuthority:"maintenanceInput"},{text:"拍照",image:"https://www.xzxskj.com/xcximg/icon_paizhao@3x.png",path:"/pagesTakePhoto/takePhoto/takePhoto",menuAuthority:"takePhoto"},{text:"成色判断",image:"https://www.xzxskj.com/xcximg/icon_chengse@3x.png",path:"/pagesFinenessJudge/finenessJudge/finenessJudge",menuAuthority:"finenessJudge"},{text:"定价上架",image:"https://www.xzxskj.com/xcximg/icon_shangjia@3x.png",path:"/pagesListingProduct/listingProduct/listingProduct",menuAuthority:"listingProduct"},{text:"库存管理",image:"https://www.xzxskj.com/xcximg/icon_kucun@3x.png",path:"/pagesInventoryManager/inventoryManager/inventoryManager",menuAuthority:"inventoryManager"},{text:"快速批发",image:"https://www.xzxskj.com/xcximg/icon_pifa@3x.png",path:"/pagesFirstWholesale/firstWholeSale/firstWholeSale",menuAuthority:"firstWholeSale"},{text:"串号追踪",image:"https://www.xzxskj.com/xcximg/icon_chuanhao@3x.png",path:"/pagesImeiTrack/ImeiTrack/imeiTrack",menuAuthority:"imeiTrack"},{text:"质检管理",image:"https://www.xzxskj.com/xcximg/icon_zhijian@3x.png",path:"/pagesQualityControl/qualityControl/qualityControl",menuAuthority:"qualityControl"}]},{title:"后台管理",menuAuthority:"back",value:[{text:"员工岗位",image:"https://www.xzxskj.com/xcximg/icon_yuangong@3x.png",path:"/pagesStaffManager/staffManager/staffManager",menuAuthority:"staffManager"},{text:"收款账户",image:"https://www.xzxskj.com/xcximg/icon_shoukuan@3x.png",path:"",menuAuthority:""},{text:"发货地址",image:"https://www.xzxskj.com/xcximg/icon_dizhi@3x.png",path:"",menuAuthority:""},{text:"客服消息",image:"https://www.xzxskj.com/xcximg/icon_xiaoxi@3x.png",path:"",menuAuthority:""},{text:"财务对账",image:"https://www.xzxskj.com/xcximg/icon_kehuguanli@3x.png",path:"/pagesFinance/finance/finance",menuAuthority:"finance"},{text:"客户管理",image:"https://www.xzxskj.com/xcximg/icon_kehuguanli@3x.png",path:"/pagesCustomManager/customManager/customManager",menuAuthority:"customManager"}]},{title:"其他",menuAuthority:"",value:[{text:"平台客服",image:"https://www.xzxskj.com/xcximg/icon_kefu@3x.png",menuAuthority:""},{text:"意见反馈",image:"https://www.xzxskj.com/xcximg/icon_fankui@3x.png",menuAuthority:""}]}]),f=e.ref([{title:"销售订单",menuAuthority:"",values:[{image:"https://www.xzxskj.com/xcximg/icon_daifukuan@3x.png",text:"待付款",lx:"3",path:"/pagesCustomOrder/customOrder/customOrder?order=3"},{image:"https://www.xzxskj.com/xcximg/icon_daifahuo@3x.png",text:"待发货",lx:"4",path:"/pagesCustomOrder/customOrder/customOrder?order=4"},{image:"https://www.xzxskj.com/xcximg/icon_daishouhuo@3x.png",text:"待收货",lx:"5",path:"/pagesCustomOrder/customOrder/customOrder?order=5"},{image:"https://www.xzxskj.com/xcximg/icon_yishouhou1@3x.png",text:"已收货",lx:"6",path:"/pagesCustomOrder/customOrder/customOrder?order=6"},{image:"https://www.xzxskj.com/xcximg/icon_jianyiwancheng@3x.png",text:"交易完成",lx:"7",path:"/pagesCustomOrder/customOrder/customOrder?order=7"}],selected:!1},{title:"议价订单",values:[{image:"https://www.xzxskj.com/xcximg/icon_yijiazh@3x.png",text:"议价待确认",lx:"2",path:"/pagesCustomOrder/customOrder/customOrder?yj=2"},{image:"https://www.xzxskj.com/xcximg/icon_yijiacg@3x.png",text:"议价成功",lx:"3",path:"/pagesCustomOrder/customOrder/customOrder?yj=3"},{image:"https://www.xzxskj.com/xcximg/icon_yijiasb@3x.png",text:"驳回议价",lx:"4",path:"/pagesCustomOrder/customOrder/customOrder?yj=4"}],selected:!0},{title:"售后订单",values:[{image:"https://www.xzxskj.com/xcximg/icon_shouhouzhong@3x.png",text:"售后中",lx:"2",path:"/pagesCustomOrder/customOrder/customOrder?sh=2"},{image:"https://www.xzxskj.com/xcximg/icon_shouhouchenggong@3x.png",text:"售后成功",lx:"3",path:"/pagesCustomOrder/customOrder/customOrder?sh=3"},{image:"https://www.xzxskj.com/xcximg/icon_shouhouzhong@3x.png",text:"售后失败",lx:"4",path:"/pagesCustomOrder/customOrder/customOrder?sh=4"}],selected:!1},{title:"先货后款",values:[{image:"https://www.xzxskj.com/xcximg/icon_shouhouzhong@3x.png",text:"未收款",lx:"2",path:"/pagesCustomOrder/customOrder/customOrder?fpak=1"},{image:"https://www.xzxskj.com/xcximg/icon_shouhouchenggong@3x.png",text:"以收款",lx:"3",path:"/pagesCustomOrder/customOrder/customOrder?fpak=2"},{image:"https://www.xzxskj.com/xcximg/icon_shouhouzhong@3x.png",text:"以退货",lx:"4",path:"/pagesCustomOrder/customOrder/customOrder?fpak=3"}],selected:!1}]);e.computed((()=>{const e=f.value.find((e=>e.selected));return e?e.values:[]})),e.computed((()=>{const e=f.value.findIndex((e=>e.selected));return 1===e||2===e||3===e?{paddingLeft:"76rpx",paddingRight:"62rpx"}:{}}));const y=e.ref(),k=e.ref(),j=e.ref();e.onLoad((async n=>{const a=n.from;a&&"identity"===a&&(r.value=!0),console.log("customMine onLoad"),x.value=await o.useUserStore().getInfo(),console.log("userInfo:",x.value);let u=e.index.getStorageSync("selectedMine"),i=e.index.getStorageSync("identityData");x.value.joininfos&&x.value.joininfos.length>0?c.value=!0:c.value=!1,u&&(y.value=i[u].company,k.value=i[u].text,j.value=i[u].username),t.useTabStore().setCurrentTabIndex(4),s.loadMenuAuthority(),console.log("menuAuthorityData:",s.menuAuthorityData)}));const v=e.computed((()=>(console.log("menuAuthorityData.value:",s.menuAuthorityData),w.value.filter((e=>!e.menuAuthority||s.hasMenuAuthority(e.menuAuthority))).map((e=>({...e,value:e.value.filter((e=>!e.menuAuthority||s.hasMenuAuthority(e.menuAuthority)))}))))));return e.index.$on("pagesAdminUpdate",(async n=>{console.log("admin onLoad"),x.value=await o.useUserStore().getInfo(),console.log("userInfo:",x.value);let a=e.index.getStorageSync("selectedMine"),u=e.index.getStorageSync("identityData");x.value.joininfos&&x.value.joininfos.length>0?c.value=!0:c.value=!1,a&&(y.value=u[a].company,k.value=u[a].text),t.useTabStore().setCurrentTabIndex(4),s.loadMenuAuthority(),console.log("menuAuthorityData:",s.menuAuthorityData)})),(t,o)=>e.e({a:e.unref(r)},e.unref(r)?{b:e.unref(r),c:e.o(i)}:{},{d:e.unref(a.getStatusBarHeight)()+"px",e:e.t(e.unref(k)),f:e.unref(x)},(e.unref(x),{}),{g:e.unref(a.getTitleBarHeight)()+"px",h:e.unref(a.getLeftIconLeft)()+"px",i:e.unref(x)},e.unref(x)?e.e({j:""===e.unref(x).img?"https://www.xzxskj.com/xcximg/132.jpg":"https://www.xzxskj.com"+e.unref(x).img,k:e.t(e.unref(j)),l:e.t(e.unref(y)),m:e.unref(c)},e.unref(c)?{n:e.o(l)}:{}):{},{o:e.unref(v)},(e.unref(v),{}),{p:e.unref(v)},e.unref(v)?{q:e.o((t=>{return o="/pagesDataCenter/dataCenter/dataCenter",void e.index.navigateTo({url:o});var o})),r:e.f(e.unref(d),((t,o,n)=>({a:e.t(t.value),b:e.t(t.text),c:o})))}:{},{s:e.unref(m)},e.unref(m)?{t:e.o(p)}:{},{v:e.sr(g,"2efd4a7c-0",{k:"identityPopup"}),w:e.o(p),x:e.o(h),y:e.p({"background-color":"rgba(0,0,0,0)","is-mask-click":!0,"safe-area:false":!0,type:"center"})})}},s=e._export_sfc(u,[["__scopeId","data-v-2efd4a7c"]]);wx.createPage(s);
