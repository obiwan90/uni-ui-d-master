"use strict";const e=require("../../../common/vendor.js"),o=require("../../api/api.js");if(!Array){(e.resolveComponent("uv-checkbox")+e.resolveComponent("uv-checkbox-group"))()}Math||((()=>"../../../uni_modules/uv-checkbox/components/uv-checkbox/uv-checkbox.js")+(()=>"../../../uni_modules/uv-checkbox/components/uv-checkbox-group/uv-checkbox-group.js"))();const n={__name:"poster",props:{infos:{type:Object,default:()=>{}}},emits:["openSellPoster"],setup(n,{emit:l}){const i=e.index.getStorageSync("infos"),s=e.ref(i&&i.info?i.info.lxfs:""),a=n,c=l,t=e.ref(""),u=e.ref([{name:"电议"}]),r=e.ref([]),v=e=>{console.log(e),t.value=e[0]},d=e.ref(),f=async()=>{if(!t.value)return void e.index.showToast({title:"价格不能为空",icon:"none"});if(!s.value)return void e.index.showToast({title:"电话不能为空",icon:"none"});await(async()=>{console.log("infos",a.infos);const n={opid:e.index.getStorageSync("sessionInfo").opid,lx:"电议"===t.value?"1":"2",price:"电议"===t.value?"":t.value,phone:s.value,goodsid:a.infos.id},l=await o.apiPosterSubmit(n);"200"===l.code?(d.value=l.id,console.log("res",l),console.log("id",d.value)):e.index.showToast({title:"提交失败，请重试",icon:"none"})})();const n={id:d.value,price:t.value,phone:s.value};console.log("发送的data",n),c("openSellPoster",n)};return(o,l)=>({a:e.o((e=>o.$emit("close"))),b:e.t(n.infos.price),c:"电议"===e.unref(t),d:e.unref(t),e:e.o((o=>e.isRef(t)?t.value=o.detail.value:null)),f:e.p({activeColor:"red",name:e.unref(u)[0].name,labelColor:"red",label:e.unref(u)[0].name}),g:e.o(v),h:e.o((o=>e.isRef(r)?r.value=o:null)),i:e.p({shape:"circle",modelValue:e.unref(r)}),j:e.unref(s),k:e.o((o=>e.isRef(s)?s.value=o.detail.value:null)),l:e.o(f)})}},l=e._export_sfc(n,[["__scopeId","data-v-c767d0b6"]]);wx.createComponent(l);
