"use strict";const e=require("../../../common/vendor.js"),t=require("../../../stores/userInfoStore.js");if(!Array){(e.resolveComponent("l-painter-text")+e.resolveComponent("l-painter-view")+e.resolveComponent("l-painter")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../../uni_modules/lime-painter/components/l-painter-text/l-painter-text.js")+(()=>"../../../uni_modules/lime-painter/components/l-painter-view/l-painter-view.js")+(()=>"../../../uni_modules/lime-painter/components/l-painter/l-painter.js")+(()=>"../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const n={__name:"posterPannel",props:{infos:{type:Object,default:()=>({})},titleRemarl:{type:String,default:()=>""},qualityinspection:{type:Array,default:()=>[]},modelData:{type:Array,default:()=>[]}},setup(n,{expose:i}){const o=e.ref(!1),r=e.ref(!1);t.useUserStore();const a=n,p=e.computed((()=>a.qualityinspection&&0!==a.qualityinspection.length?a.qualityinspection.map((e=>{const t=e.er.filter((e=>e&&"#41AF6F"===e.xznrcor)),n=e.er.filter((e=>e&&"#41AF6F"!==e.xznrcor));return{...e,er:n,normalCount:t.length}})):[])),s=e.ref(null),l=e.ref(null),c=e.ref(""),f=()=>{console.log("quality Popup is closed"),l.value.close()},g=e=>{e.show||(r.value=e.show,o.value=e.show,console.log("quality Popup is closed"))},x=()=>new Promise(((t,n)=>{e.nextTick$1((()=>{s.value.canvasToTempFilePathSync({fileType:"jpg",pathType:"url",quality:.6,success:e=>{console.log(e.tempFilePath),c.value=e.tempFilePath,l.value.open(),t()},fail:t=>{console.log(t),e.index.showToast({title:"生成分享图片失败",icon:"none"}),n(t)}})}))})),d=async()=>{try{e.index.showLoading({title:"下载中...",mask:!0});const t=await e.index.getImageInfo({src:c.value});await e.index.saveImageToPhotosAlbum({filePath:t.path}),popup.value.close(),setTimeout((()=>{e.index.showToast({title:"保存成功，请到相册查看",icon:"none"})}),500)}catch(t){console.error(t),e.index.showToast({title:"保存失败，请重新点击下载",icon:"none"})}finally{e.index.hideLoading()}};return i({posterShow:async()=>{e.index.showLoading({title:"加载中",mask:!0}),o.value=!0,r.value=!0,await e.nextTick$1();let t=0;const n=1e3,i=async()=>{if(s.value)try{await x(),e.index.hideLoading()}catch(o){console.error(o),e.index.hideLoading()}else console.error("poster is null"),t+=n,t<5e3?setTimeout(i,n):(console.error("最大延迟已达到，停止检查"),e.index.hideLoading())};setTimeout(i,n)}}),(t,i)=>e.e({a:e.unref(o)},e.unref(o)?{b:e.p({css:"font-family: PingFang SC, PingFang SC;font-weight: bold;font-size: 48rpx;color: #FFFFFF;",text:"质检报告"}),c:e.p({css:"font-family: PingFang SC, PingFang SC;font-weight: 400;font-size: 24rpx;color: #FFFFFF;vertical-align: bottom;",text:"物品编码 "}),d:e.p({css:"font-family: PingFang SC, PingFang SC;font-weight: 400;font-size: 24rpx;color: #FFFFFF;opacity:0.4;vertical-align: bottom;",text:n.infos.wpbm}),e:e.p({css:"margin-left:20rpx;display:flex;flex-direction: column;width:60%"}),f:e.p({css:"font-family: EU-H7X, EU-H7X;font-weight: bold;font-size: 56rpx;color: #FF6600;vertical-align: bottom;",text:n.infos.finenessname}),g:e.p({css:"margin-right:20rpx"}),h:e.p({css:"display:flex;justify-content: space-between;align-items: center;width:100%"}),i:e.p({css:"font-family: PingFang SC, PingFang SC;font-weight: bold;font-size: 24rpx;color: #FFFFFF;",text:"质检备注 "}),j:e.p({css:"margin-right:20rpx;font-family: PingFang SC, PingFang SC;font-weight: 400;font-size: 24rpx;color: #FFFFFF;opacity:0.4;",text:n.titleRemarl}),k:e.p({css:"margin-top:20rpx;margin-left:20rpx;margin-right:20rpx"}),l:e.p({css:"width: 710rpx;display:flex;flex-direction: column;margin-top:20rpx;box-sizing: border-box;"}),m:e.p({css:"margin-left:20rpx;margin-top:14rpx;margin-right:20rpx;font-family: PingFang SC, PingFang SC;font-weight: bold;font-size: 28rpx;color: #1F1F1F",text:n.infos.name}),n:e.p({css:"margin-left:20rpx;margin-top:14rpx;margin-bottom:14rpx;width: 650rpx;height: 2rpx;background: #EEEEEE;border-radius: 0rpx 0rpx 0rpx 0rpx;"}),o:e.f(n.modelData.slice(0,4),((t,n,i)=>({a:"5d1f67ec-18-"+i+",5d1f67ec-17-"+i,b:e.p({css:"font-family: PingFang SC, PingFang SC;font-weight: 400;font-size: 24rpx;color: #1F1F1F;opacity:0.4",text:t.title}),c:"5d1f67ec-19-"+i+",5d1f67ec-17-"+i,d:e.p({css:"margin-top:6rpx;font-family: PingFang SC, PingFang SC;font-weight: 400;font-size: 24rpx;color: #1F1F1F;",text:t.value}),e:n,f:"5d1f67ec-17-"+i+",5d1f67ec-16"}))),p:e.p({css:"margin-bottom:14rpx;height:80rpx;width:25%;display: flex;flex-direction: column;justify-content: space-between;align-items: center;border-right: 2rpx solid #EEEEEE;"}),q:e.p({css:"display: flex;align-items: center;justify-content: center;width:100%"}),r:e.p({css:";margin-top:30rpx;margin-left:10rpx;width: 690rpx;box-shadow: 0rpx 0rpx 20rpx 2rpx rgba(0,0,0,0.05);border-radius: 10rpx 10rpx 10rpx 10rpx;background: #FFFFFF;display: flex;flex-direction: column;"}),s:e.p({css:"font-family: PingFang SC, PingFang SC;font-weight: bold;font-size: 24rpx;color: #1F1F1F;margin-top:12rpx;margin-left:24rpx",text:"外观成色"}),t:e.f(n.infos.combinationid,((t,i,o)=>({a:"5d1f67ec-24-"+o+",5d1f67ec-23-"+o,b:e.p({css:"font-family: PingFang SC, PingFang SC;font-weight: 400;font-size: 24rpx;color: #1F1F1F;",text:t}),c:"5d1f67ec-25-"+o+",5d1f67ec-23-"+o,d:e.p({css:{fontFamily:"PingFang SC, PingFang SC",fontWeight:"400",fontSize:"24rpx",color:n.infos.combinationyslist[i]},text:n.infos.combinationname[i]}),e:i,f:"5d1f67ec-23-"+o+",5d1f67ec-21"}))),v:e.p({css:"display: flex;justify-content: space-between;align-items: center;width: 650rpx;margin-top:12rpx;margin-left:24rpx;margin-bottom:12rpx;"}),w:e.p({css:"margin-left:10rpx;width: 690rpx;background: #FFFFFF;border-radius: 10rpx 10rpx 10rpx 10rpx;display: flex;flex-direction: column;"}),x:e.p({css:"margin-top:10rpx"}),y:e.f(p.value,((t,n,i)=>e.e({a:"5d1f67ec-28-"+i+",5d1f67ec-27-"+i,b:e.p({css:"font-family: PingFang SC, PingFang SC;font-weight: bold;font-size: 24rpx;color: #1F1F1F;",text:t.name}),c:"0"!==t.ycnum},"0"!==t.ycnum?{d:"5d1f67ec-31-"+i+",5d1f67ec-30-"+i,e:e.p({css:"font-family: PingFang SC, PingFang SC; font-weight: 400; font-size: 24rpx; color: #ED784B;",text:`${t.ycnum}项异常`})}:{},{f:"5d1f67ec-30-"+i+",5d1f67ec-29-"+i,g:"5d1f67ec-33-"+i+",5d1f67ec-32-"+i,h:e.p({css:"font-family: PingFang SC, PingFang SC;font-weight: 400;font-size: 24rpx;color: #41AF6F;",text:`${t.normalCount}项正常`}),i:"5d1f67ec-32-"+i+",5d1f67ec-29-"+i,j:"5d1f67ec-29-"+i+",5d1f67ec-27-"+i,k:"5d1f67ec-27-"+i+",5d1f67ec-26-"+i,l:e.f(t.er.slice(0,3),((t,n,o)=>({a:"5d1f67ec-35-"+i+"-"+o+",5d1f67ec-34-"+i+"-"+o,b:e.p({css:"font-family: PingFang SC, PingFang SC;font-weight: 400;font-size: 24rpx;color: #1F1F1F;",text:t.name}),c:"5d1f67ec-36-"+i+"-"+o+",5d1f67ec-34-"+i+"-"+o,d:e.p({css:{fontFamily:"PingFang SC, PingFang SC",fontWeight:"400",fontSize:"24rpx",color:t.xznrcor},text:t.xznr}),e:n,f:"5d1f67ec-34-"+i+"-"+o+",5d1f67ec-26-"+i}))),m:n,n:"5d1f67ec-26-"+i+",5d1f67ec-0"}))),z:e.p({css:"width: 124rpx;height: 46rpx;background: #FFF8EF;border-radius: 24rpx 24rpx 24rpx 24rpx;display:flex;justify-content: center;align-items: center;"}),A:e.p({css:"margin-left:10rpx;width: 124rpx;height: 46rpx;background: #EFFFF3;border-radius: 24rpx 24rpx 24rpx 24rpx;display:flex;justify-content: center;align-items: center;"}),B:e.p({css:"display:flex;justify-content: center;align-items: center;margin-right:24rpx"}),C:e.p({css:"width:100%;display:flex;justify-content: space-between;align-items: center;margin-top:12rpx;margin-left:24rpx;margin-right:24rpx"}),D:e.p({css:"display: flex;justify-content: space-between;align-items: center;width: 650rpx;margin-top:12rpx;margin-left:24rpx;margin-bottom:12rpx;"}),E:e.p({css:"margin-top:10rpx;margin-left:10rpx;width: 690rpx;background: #FFFFFF;border-radius: 10rpx 10rpx 10rpx 10rpx;display: flex;flex-direction: column;"}),F:e.sr(s,"5d1f67ec-0",{k:"poster1"}),G:e.p({hidden:!0,"file-type":"jpg",css:"padding-bottom:20rpx;width: 710rpx; border-radius: 20rpx;background-image: url(https://www.xzxskj.com/Public/upload/66da6753f276c9231.png);","custom-style":"position: fixed;top: 0;left: 0;"})}:{},{H:e.unref(r)},e.unref(r)?{I:e.o(f),J:e.unref(c),K:e.o(((...e)=>t.transmit&&t.transmit(...e))),L:e.o(d)}:{},{M:e.sr(l,"5d1f67ec-37",{k:"qualityPopup"}),N:e.o(f),O:e.o(g),P:e.p({type:"center","background-color":"rgba(0,0,0,0)","safe-area":!1,"is-mask-click":!0})})}},i=e._export_sfc(n,[["__scopeId","data-v-5d1f67ec"]]);wx.createComponent(i);
