"use strict";const e=require("../../common/vendor.js"),a=require("../../utils/common.js"),l=require("../api/api.js");if(!Array){(e.resolveComponent("custom-header")+e.resolveComponent("van-dropdown-item")+e.resolveComponent("van-dropdown-menu")+e.resolveComponent("uv-tabs")+e.resolveComponent("van-progress")+e.resolveComponent("van-loading")+e.resolveComponent("van-image")+e.resolveComponent("van-tag")+e.resolveComponent("z-paging"))()}Math||((()=>"../../components/custom-header/custom-header.js")+(()=>"../../uni_modules/uv-tabs/components/uv-tabs/uv-tabs.js")+(()=>"../../uni_modules/z-paging/components/z-paging/z-paging.js"))();const u={__name:"dataCenterDetail",setup(u){const t=e.ref(["今日","昨日","本月","上月"]),r=e.computed((()=>t.value.filter(((e,a)=>4!==a)))),n=e.ref("时间区间"),v=e.ref(0),o=e.ref("开始时间"),i=e.ref("截止时间"),s=e.ref(),d=e.ref(),f=e=>{console.log(e),o.value=e.detail.value,s.value=a.toBeijingTimestamp(e.detail.value)},c=e=>{console.log(e),i.value=e.detail.value,d.value=a.toBeijingTimestamp(e.detail.value)},p=e.ref(!1),g=e.ref(!1),m=()=>{g.value=!g.value,p.value=!0,v.value=4},x=()=>{g.value=!1,p.value=!1,S.value.reload(!0)},h=()=>{o.value="开始时间",i.value="截止时间",s.value="",d.value=""};e.ref(0);const S=e.ref(null),y=e.ref([]);e.ref(!0);const F=async(e,a)=>{console.log("pageNo:",e),console.log("pageSize:",a);const l=await ue(e-1);console.log("data",l),S.value.complete(l)},C=e.ref([{text:"全部仓库",value:0}]),I=e.ref([{text:"全部采购",value:0}]),b=e.ref([{text:"全部销售",value:0}]),z=e.ref([{text:"全部成色",value:0}]),j=e.ref(0),D=e.ref(0),k=e.ref(0),w=e.ref(0),E=e.ref([{name:"全部销售",xslx:"1"},{name:"线下销售",xslx:"2"},{name:"平台销售",xslx:"3"},{name:"售后退款",xslx:"4"}]),q=e.ref(0),A=e.ref("1"),B=e.ref(""),_=e.ref(""),L=e.ref(""),T=e.ref(""),P=e=>{q.value=e.index,A.value=E.value[e.index].xslx,S.value.reload(!0)},W=e=>{console.log(e),B.value=0===e.detail?"":e.detail,j.value=e.detail,S.value.reload(!0)},H=e=>{console.log(e),B.value=0===e.detail?"":e.detail,D.value=e.detail,S.value.reload(!0)},M=e=>{console.log(e),B.value=0===e.detail?"":e.detail,k.value=e.detail,S.value.reload(!0)},N=e=>{console.log(e),B.value=0===e.detail?"":e.detail,w.value=e.detail,S.value.reload(!0)},R=e.ref([]),G=e.ref([]),J=e.ref([]),K=e.ref([]),O=e.ref([]),Q=e.ref(0),V=e.ref(0),U=e.ref("1"),X=e.ref(""),Y=e.ref(""),Z=e.ref(""),$=e.ref(""),ee=e.ref(""),ae=e.ref("0"),le=e.computed((()=>({lx:v.value+1,xslx:A.value,ckid:B.value,cgid:_.value,xsid:L.value,csid:T.value,ymdj:U.value,flid:X.value,ppid:Y.value,xhid:Z.value,ncid:$.value,qcid:ee.value,start:ae.value,startTime:v.value+1===5?s.value:"",endTime:v.value+1===5?d.value:""}))),ue=async e=>{ae.value=String(e);const a=await l.apiSaleData(le.value);return 1===a.zt&&(R.value=a.cklist,R.value&&R.value.forEach((e=>{C.value.find((a=>a.value===parseInt(e.id)))||C.value.push({text:e.name,value:parseInt(e.id)}),C.value=[...C.value]})),G.value=a.cgyglist,G.value&&G.value.forEach((e=>{I.value.find((a=>a.value===parseInt(e.id)))||I.value.push({text:e.username,value:parseInt(e.id)}),I.value=[...I.value]})),J.value=a.xsyglist,J.value&&J.value.forEach((e=>{b.value.find((a=>a.value===parseInt(e.id)))||b.value.push({text:e.username,value:parseInt(e.id)}),b.value=[...b.value]})),K.value=a.cslist,K.value&&K.value.forEach((e=>{z.value.find((a=>a.value===parseInt(e.id)))||z.value.push({text:e.name,value:parseInt(e.id)}),z.value=[...z.value]})),a.lists||a.goodslist)?("6"!==U.value?(O.value=a.lists,Q.value=0,O.value.forEach((e=>{Q.value+=parseInt(e.num)})),V.value=a.zprice):O.value=a.goodslist,O.value):[]},te=e.ref(!1),re=e.ref(),ne=e=>te?0!==Q.value?(e.num/Q.value*100).toFixed(0):0:0!==V.value?(e.price/V.value*100).toFixed(0):0,ve=()=>{if(console.log("customLeftFn"),"1"!==U.value){ae.value="1",U.value=String(parseInt(U.value)-1);const a=e.index.getStorageSync("selectedDataAnalysis"),{flid:l,ppid:u,xhid:t,ncid:r,qcid:n}=a.pop();X.value=l,Y.value=u,Z.value=t,$.value=r,ee.value=n,e.index.setStorageSync("selectedDataAnalysis",a),re.value="1"===U.value?"销售数据":"2"===U.value||"3"===U.value?item.name:"4"===U.value?"内存数据":"5"===U.value?"全称数据":"商品列表","1"===U.value?X.value="":"2"===U.value?Y.value="":"3"===U.value?Z.value="":"4"===U.value?$.value="":"5"===U.value&&(ee.value=""),S.value.reload(!0)}else e.index.removeStorageSync("selectedDataAnalysis"),e.index.navigateBack()};return e.onLoad((e=>{e.title&&(re.value=e.title)})),(a,l)=>e.e({a:e.t(e.unref(re)),b:e.o(ve),c:e.p({backgroundColor:"#FFFFFF",customLeftIcon:!0}),d:e.f(e.unref(r),((a,l,u)=>({a:e.t(a),b:e.o((e=>(e=>{v.value=e,g.value=!1,p.value=!1,5!==v.value&&S.value.reload(!0)})(l)),l),c:e.unref(v)===l?1:"",d:l}))),e:e.t(e.unref(n)),f:e.o(m),g:4===e.unref(v)?1:"",h:e.t(e.unref(o)),i:e.o(f),j:e.unref(o),k:e.t(e.unref(i)),l:e.o(c),m:e.unref(i),n:e.o(h),o:e.o(x),p:e.unref(g),q:e.unref(g)?1:"",r:e.o(W),s:e.p({value:e.unref(j),options:e.unref(C),popupStyle:"border-radius: 0 0 20rpx 20rpx;"}),t:e.o(H),v:e.p({value:e.unref(D),options:e.unref(I),popupStyle:"border-radius: 0 0 20rpx 20rpx;"}),w:e.o(M),x:e.p({value:e.unref(k),options:e.unref(b),popupStyle:"border-radius: 0 0 20rpx 20rpx;"}),y:e.o(N),z:e.p({value:e.unref(w),options:e.unref(z),popupStyle:"border-radius: 0 0 20rpx 20rpx;"}),A:e.p({zIndex:"20",activeColor:"#EB4636"}),B:"6"!==e.unref(U)},"6"!==e.unref(U)?e.e({C:!e.unref(te)},(e.unref(te),{}),{D:e.o((e=>{te.value=!te.value}))}):{},{E:e.o(P),F:e.p({list:e.unref(E),lineWidth:"30",lineColor:"linear-gradient( 86deg, #ED784B 0%, #EB4636 100%)",lineHeight:"3",fontSize:28,inactiveStyle:{color:"#1F1F1F",opacity:.6},activeStyle:{color:"#1F1F1F",fontWeight:"bold",fontSize:32,opacity:1},current:e.unref(q)}),G:e.t(e.unref(Q)),H:e.t(e.unref(V)),I:"6"!==e.unref(U)},"6"!==e.unref(U)?{J:e.f(e.unref(y),((a,l,u)=>e.e({a:e.t(a.name),b:e.t(ne(a)),c:"c85d84a7-8-"+u+",c85d84a7-7",d:e.p({trackColor:"#F8F8F8",color:"linear-gradient( 90deg, #7EBFFF 0%, #4079FF 100%)",showPivot:!1,percentage:ne(a),strokeWidth:"12"})},e.unref(te)?{f:e.t(a.num)}:{e:e.t(a.price)},{g:e.o((l=>(a=>{ae.value="1",U.value=String(parseInt(U.value)+1),X.value=String(a.id),re.value="1"===U.value?"销售数据":"2"===U.value||"3"===U.value?a.name:"4"===U.value?"内存数据":"5"===U.value?"全称数据":"商品列表","2"===U.value?X.value=String(a.id):"3"===U.value?Y.value=String(a.id):"4"===U.value?Z.value=String(a.id):"5"===U.value?$.value=String(a.id):ee.value=String(a.id);const l=e.index.getStorageSync("selectedDataAnalysis");l?(console.log("push"),l.push({flid:X.value,ppid:Y.value,xhid:Z.value,ncid:$.value,qcid:ee.value}),e.index.setStorageSync("selectedDataAnalysis",l)):(console.log("set"),e.index.setStorageSync("selectedDataAnalysis",[{flid:X.value,ppid:Y.value,xhid:Z.value,ncid:$.value,qcid:ee.value}])),S.value.reload(!0)})(a)),l),h:l}))),K:!e.unref(te)}:{L:e.f(e.unref(y),((a,l,u)=>({a:"c85d84a7-10-"+u+",c85d84a7-9-"+u,b:"c85d84a7-9-"+u+",c85d84a7-7",c:e.p({width:"95",height:"95",fit:"widthFix",radius:"18rpx",src:a.cover,mode:"aspectFit"}),d:e.t(a.finenessname),e:"c85d84a7-11-"+u+",c85d84a7-7",f:e.t(a.name),g:e.t(a.ch),h:e.t(a.cgyname),i:e.t(a.ckame),j:e.t(a.price),k:l}))),M:e.p({type:"spinner",size:"20",vertical:!0}),N:e.p({size:"mini",color:"linear-gradient( 132deg, #D94C24 0%, #FF5221 100%)"})},{O:e.sr(S,"c85d84a7-7",{k:"paging"}),P:e.o(F),Q:e.o((a=>e.isRef(y)?y.value=a:null)),R:e.p({"show-refresher-update-time":!0,"default-page-size":20,fixed:!1,modelValue:e.unref(y)})})}},t=e._export_sfc(u,[["__scopeId","data-v-c85d84a7"]]);wx.createPage(t);
