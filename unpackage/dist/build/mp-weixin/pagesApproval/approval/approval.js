"use strict";const e=require("../../common/vendor.js"),o=require("../../utils/debounce.js"),n=require("../api/api.js"),s=require("../../utils/system.js");if(!Array){e.resolveComponent("z-paging")()}Math;const a={__name:"approval",setup(a){const t=e.ref(0),r=e.ref(["未审批","已审批"]),i=e.ref("1"),u=e.ref(null),c=e.ref([]),f=async(e,o)=>{console.log("pageNo:",e),console.log("pageSize:",o);const n=await m(e-1);u.value.complete(n)},l=()=>{e.index.navigateBack()},d=o.debounce((e=>{g(e)}),300,!0),g=o=>{e.index.showModal({content:"确认退款",showCancel:!1,success:e=>{e.cancel||(console.log("用户点击了确认"),p(o))}})};e.ref([]);const p=async o=>{const s={id:o},a=await n.apiApproval(s);200===a.code&&(e.index.showToast({title:"操作成功",icon:"success",duration:500}),setTimeout((()=>{u.value.reload(!0)}),500)),201===a.code&&e.index.showToast({title:a.msg,icon:"error",duration:1e3})},m=async e=>{const o={lx:i.value,start:e},s=await n.apiGetApprovalList(o);return"200"===s.code?s.lists:[]};return e.onShow((()=>{u&&u.value&&u.value.reload(!0)})),(o,n)=>({a:e.unref(s.getStatusBarHeight)()+"px",b:e.o(l),c:e.f(e.unref(r),((o,n,s)=>({a:e.t(o),b:e.o((e=>(e=>{t.value=e,i.value=e+1,u&&u.value&&u.value.reload(!0)})(n)),n),c:e.unref(t)===n?1:"",d:n}))),d:e.unref(s.getTitleBarHeight)()+"px",e:e.unref(s.getLeftIconLeft)()+"px",f:e.unref(s.getStatusBarHeight)()+e.unref(s.getTitleBarHeight)()+"px",g:e.f(e.unref(c),((o,n,s)=>e.e({a:e.t(o.ordernumber),b:e.f(o.gwclist,((o,n,s)=>e.e({a:o.goodsinfos.finenessname},o.goodsinfos.finenessname?{b:e.t(o.goodsinfos.finenessname)}:{},{c:e.t(o.goodsinfos.name),d:e.t(o.goodsinfos.ch),e:e.t(o.goodsinfos.cgyname),f:o.ckame},o.ckame?{g:e.t(o.goodsinfos.ckname)}:{},{h:e.t(o.goodsinfos.price),i:n}))),c:e.t(o.remarks),d:e.t(o.num),e:e.t(o.price),f:e.t(o.sqrname)},"1"===e.unref(i)?{g:e.o((n=>e.unref(d)(o.id)),n)}:{},{h:n}))),h:e.t(e.unref(r)[e.unref(t)]),i:"1"===e.unref(i),j:"1"===e.unref(i).value,k:e.sr(u,"230ed3b1-0",{k:"paging"}),l:e.o(f),m:e.o((o=>e.isRef(c)?c.value=o:null)),n:e.p({"show-refresher-update-time":!0,fixed:!1,modelValue:e.unref(c)})})}},t=e._export_sfc(a,[["__scopeId","data-v-230ed3b1"]]);wx.createPage(t);
