"use strict";const e=require("../../../common/vendor.js"),o=require("../../api/api.js"),n={__name:"refundPannel",props:{itemIndex:{type:Number,required:!0}},emits:["close"],setup(n,{emit:i}){const s=n,t=i,d=e.ref(null),a=e.ref(""),r=e.computed((()=>{if(d.value)return-1===s.itemIndex?"￥"+d.value.price:"￥"+d.value.goodsinfos[s.itemIndex].price})),l=async()=>{console.log(" propos.itemIndex",s.itemIndex),console.log("orderInfo.value",d.value);const n={id:d.value.orderid,opid:e.index.getStorageSync("sessionInfo").opid,lx:-1===s.itemIndex?1:2,goodsid:-1===s.itemIndex?d.value.goodsinfos.map((e=>e.goodsid)).join(","):d.value.goodsinfos[s.itemIndex].goodsid,remarks:a.value};console.log("param",n);const i=await o.apiRefund(n);console.log("res:",i),200===i.code?e.index.showToast({title:"退款申请提交成功",icon:"success",duration:500}):e.index.showToast({title:"退款申请提交失败",icon:"error",duration:500}),setTimeout((()=>{t("close")}),500)};return e.onMounted((()=>{const o=e.index.getStorageSync("orderDetailItem");o&&(d.value=JSON.parse(o))})),(o,n)=>({a:e.o((e=>o.$emit("close"))),b:r.value,c:e.o((e=>r.value=e.detail.value)),d:e.unref(a),e:e.o((o=>e.isRef(a)?a.value=o.detail.value:null)),f:e.o(l)})}},i=e._export_sfc(n,[["__scopeId","data-v-5518c8f2"]]);wx.createComponent(i);
