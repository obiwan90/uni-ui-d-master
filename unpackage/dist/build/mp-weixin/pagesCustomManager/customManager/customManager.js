"use strict";const e=require("../../common/vendor.js"),a=require("../../utils/common.js"),t=require("../api/api.js");if(!Array){(e.resolveComponent("custom-header")+e.resolveComponent("uni-data-select")+e.resolveComponent("z-paging"))()}Math||((()=>"../../components/custom-header/custom-header.js")+o+(()=>"../../uni_modules/uni-data-select/components/uni-data-select/uni-data-select.js")+(()=>"../../uni_modules/z-paging/components/z-paging/z-paging.js"))();const o=()=>"../../uni_modules/qiao-select/components/qiao-select/qiaoSelect.js",l={__name:"customManager",setup(o){e.ref(0);const l=e.ref([{value:0,text:"默认"},{value:1,text:"采购台数最多"},{value:2,text:"采购金额最多"},{value:3,text:"欠款台数最多"},{value:4,text:"欠款金额最多"}]);e.ref(!1);const u=e=>{console.log("returnProductSelectValue:",e),D.value=e,s.value.reload(!0)},r=e.ref("mdmc"),n=e.ref("mdmc"),s=e.ref(null),c=e.ref([]);e.ref(!0);const i=e.ref("1"),f=async(e,a)=>{console.log("pageNo:",e),console.log("pageSize:",a);const t=await A(e-1);console.log("res data:",t),s.value.complete(t)},v=e.ref([]),d=e.ref(["今日","昨日","本月","上月"]),m=e.computed((()=>d.value.filter(((e,a)=>4!==a)))),p=e.ref("时间区间"),g=e.ref(0),x=e.ref("开始时间"),h=e.ref("截止时间"),S=e=>{x.value=e.detail.value},y=e=>{h.value=e.detail.value},C=e.ref(!1),w=e.ref(!1),z=()=>{w.value=!w.value,C.value=!0,g.value=-1},_=()=>{w.value=!w.value,C.value=!0,i.value="5",s.value.reload(!0)},j=()=>{x.value="开始时间",h.value="截止时间"};e.ref([{text:"欠款台数",values:"25"},{text:"欠款金额",values:"51545"},{text:"采购台数",values:"25"},{text:"采购金额",values:"515451"}]);const T=()=>{e.index.navigateTo({url:"/pagesMyCustomer/myCustomer/myCustomer"})},q=e=>{e.length>0?k(e):I.value=""},b=e=>{e&&(console.log("selectSearchChange e:",e),I.value=e.id,s.value.reload(!0))},k=async a=>{const o={phone:a,opid:e.index.getStorageSync("sessionInfo").opid,lx:"2"},l=await t.apiCustomerSearch(o);1===l.zt&&(console.log("res:",l),v.value=l.lists?l.lists:[])},I=e.ref(""),D=e.ref(""),M=e.ref([]),A=async o=>{const l={opid:e.index.getStorageSync("sessionInfo").opid,lx:i.value,startTime:"5"==i.value?a.convertDateStringToTimestamp(x.value):"",endTime:"5"==i.value?a.convertDateStringToTimestamp(h.value):"",start:o,khid:I.value,pxlx:"0"===D.value?"":D.value},u=await t.apiCustomerData(l);return 1===u.zt?(console.log("res:",u),M.value=u.lists,M.value):[]};return e.onShow((()=>{s.value.reload(!0)})),(a,t)=>({a:e.p({backgroundColor:"#ffffff"}),b:e.o(q),c:e.o(b),d:e.p({keyId:2,dataList:e.unref(v),phText:"请选择客户名称或手机号码",searchKey:e.unref(r),showBorder:!1,disabled:!1,showField:e.unref(n)}),e:e.o(u),f:e.p({localdata:e.unref(l),placement:"bottom",clear:!1}),g:e.o(((...e)=>a.selectSaiXuan&&a.selectSaiXuan(...e))),h:e.f(e.unref(m),((a,t,o)=>({a:e.t(a),b:e.o((e=>(e=>{g.value=e,w.value=!1,C.value=!1,i.value=e+1,s.value.reload(!0)})(t)),t),c:e.unref(g)===t?1:"",d:t}))),i:e.t(e.unref(p)),j:e.o(z),k:e.unref(C)?1:"",l:e.t(e.unref(x)),m:e.o(S),n:e.unref(x),o:e.t(e.unref(h)),p:e.o(y),q:e.unref(h),r:e.o(j),s:e.o(_),t:e.unref(w),v:e.unref(w)?1:"",w:e.f(e.unref(c),((a,t,o)=>({a:e.t(a.khname),b:e.t(a.num),c:e.t(a.price),d:e.t(a.nums),e:e.t(a.prices),f:t}))),x:e.sr(s,"f56aed92-3",{k:"paging"}),y:e.o(f),z:e.o((a=>e.isRef(c)?c.value=a:null)),A:e.p({"default-page-size":20,"show-refresher-update-time":!0,fixed:!1,modelValue:e.unref(c)}),B:e.o(T)})}},u=e._export_sfc(l,[["__scopeId","data-v-f56aed92"]]);wx.createPage(u);
