"use strict";const e=require("../../../common/vendor.js");if(!Array){(e.resolveComponent("uni-list-item")+e.resolveComponent("uni-list")+e.resolveComponent("uni-collapse-item")+e.resolveComponent("uni-collapse"))()}Math||((()=>"../../../uni_modules/uni-list/components/uni-list-item/uni-list-item.js")+(()=>"../../../uni_modules/uni-list/components/uni-list/uni-list.js")+(()=>"../../../uni_modules/uni-collapse/components/uni-collapse-item/uni-collapse-item.js")+(()=>"../../../uni_modules/uni-collapse/components/uni-collapse/uni-collapse.js"))();const l={__name:"saixuan",props:{ids:{type:String,default:""},filterList:{type:Array,default:[]},colorItems:{type:Array,default:[]}},emits:["reLoad","closePopup"],setup(l,{emit:s}){const t=s;e.ref({});const i=l,a=e.ref(""),o=e.ref("");e.ref(null);const n=e.ref(""),c=e.ref([]),d=(e,l)=>{if(l.selected=!l.selected,"颜色"===e.name){const s=e.items.find((e=>e.id===l.id));s&&(s.selected=l.selected)}r()},r=()=>{c.value=i.filterList.flatMap((e=>"颜色"===e.name?p.value.filter((e=>e.selected)).map((e=>({id:e.id,name:e.name}))):e.items.filter((e=>e.selected)).map((e=>({id:e.id,name:e.name}))))),console.log("selectedText.value",c.value)},m=()=>{if(a.value&&!o.value||!a.value&&o.value)return void e.index.showToast({title:"请输入完整的价格范围",icon:"none",duration:500});const l={brandid:"",classid:"",colourid:"",deliverys:"",finenessid:"",gd:"",memoryid:"",newarrivals:"",price:"",pricesdesc:"",sftj:"",sfzd:"",start:"",systemid:"",versionid:""};i.filterList.forEach((e=>{console.log("category",e);const s=e.items.filter((e=>e.selected)).map((e=>e.id)).join(","),t=e.items.filter((e=>e.selected)).map((e=>e.name)).join(",");switch(e.name){case"分类":l.classid=s;break;case"品牌":l.brandid=s;break;case"系统":l.systemid=s;break;case"价格":l.price=a.value?a.value+"-"+o.value:t;break;case"版本":l.versionid=s;break;case"成色":l.finenessid=s;break;case"内存":l.memoryid=s;break;case"颜色":l.colourid=s;break;case"资检渠道":l.gd=s;break;case"其他":e.items.some((e=>"1"===e.id&&e.selected))&&(l.sftj="1"),e.items.some((e=>"2"===e.id&&e.selected))&&(l.sfzd="1")}})),console.log("Selected Items:",l),t("reLoad",l),t("closePopup")},u=()=>{a.value="",o.value="",i.filterList.forEach((e=>{e.items.forEach((e=>{e.selected=!1}))})),i.colorItems.forEach((e=>{e.selected=!1})),n.value="",c.value=[],console.log("筛选条件已重置。")},p=e.computed((()=>(console.log("filterList",i.filterList),n.value?i.colorItems.filter((e=>e.name.includes(i.colorFilter))):i.colorItems)));return(s,t)=>({a:e.o((e=>s.$emit("closePopup"))),b:e.f(l.filterList,((l,s,t)=>e.e({a:e.t(l.name),b:"颜色"===l.name&&p.value.length>5||"颜色"!==l.name&&l.items.length>6},"颜色"===l.name&&p.value.length>5||"颜色"!==l.name&&l.items.length>6?{c:l.pannelShow?1:""}:{},{d:"价格"===l.name},"价格"===l.name?{e:a.value,f:e.o((e=>a.value=e.detail.value),l.id),g:o.value,h:e.o((e=>o.value=e.detail.value),l.id)}:{},{i:"颜色"===l.name},"颜色"===l.name?{j:e.o((()=>{}),l.id),k:e.o([e=>n.value=e.detail.value,l.id,()=>{},l.id],l.id),l:n.value}:{},{m:"颜色"===l.name},"颜色"===l.name?{n:e.f(p.value.slice(0,5),((s,t,i)=>({a:e.t(s.name),b:s.selected?1:"",c:t,d:e.o((e=>d(l,s)),t)})))}:{o:e.f(l.items.slice(0,6),((s,t,i)=>({a:e.t(s.name),b:s.selected?1:"",c:t,d:e.o((e=>d(l,s)),t)})))},{p:"0e9c953e-3-"+t+",0e9c953e-2-"+t,q:"0e9c953e-2-"+t+",0e9c953e-1-"+t,r:"颜色"===l.name&&p.value.length>6},"颜色"===l.name&&p.value.length>6?{s:e.f(p.value.slice(5),((s,t,i)=>({a:e.t(s.name),b:s.selected?1:"",c:t+5,d:e.o((e=>d(l,s)),t+5)})))}:l.items.length>6?{v:e.f(l.items.slice(6),((s,t,i)=>({a:e.t(s.name),b:s.selected?1:"",c:t+6,d:e.o((e=>d(l,s)),t+6)})))}:{},{t:l.items.length>6,w:"0e9c953e-1-"+t+",0e9c953e-0-"+t,x:e.sr("collapseRef","0e9c953e-0-"+t,{f:1}),y:e.o((e=>((e,l)=>{l.pannelShow=e.length>0})(e,l)),l.id),z:"0e9c953e-0-"+t,A:l.id}))),c:e.p({border:!1}),d:e.p({"show-arrow":!1,open:!1,titleBorder:"none",border:!1}),e:e.o(u),f:e.o(m)})}},s=e._export_sfc(l,[["__scopeId","data-v-0e9c953e"]]);wx.createComponent(s);
