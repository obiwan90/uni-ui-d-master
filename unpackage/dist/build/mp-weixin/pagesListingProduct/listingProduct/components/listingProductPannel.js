"use strict";const e=require("../../../common/vendor.js"),t=require("../../api/api.js"),r={__name:"listingProductPannel",props:{receivedData:{type:Object,required:!0}},emits:["close"],setup(r,{emit:i}){const o=r,n=i,c=async()=>{try{await s()}catch(e){console.error("Error during confirmation",e)}},s=async()=>{const r={opid:JSON.parse(e.index.getStorageSync("userInfo")).opid,id:o.receivedData.zjid,price:o.receivedData.price,sftj:o.receivedData.sftj},i=await t.apiListingProductAdd(r);1===i.zt?(console.log("Listing product success",i),e.index.showToast({title:"上架成功",icon:"success",duration:500}),e.index.$emit("listingProductRefresh"),n("close")):console.error("API returned an error",i)},a=async()=>{const r={opid:JSON.parse(e.index.getStorageSync("userInfo")).opid,id:o.receivedData.zjid,price:o.receivedData.price,sftj:o.receivedData.sftj},i=await t.apiListingProductAdd(r);1===i.zt?(console.log("Listing product success",i),e.index.showToast({title:"上架成功",icon:"success",duration:500}),e.index.$emit("naviInit"),e.index.$emit("productInputRefresh"),setTimeout((()=>{const t="pagesProductInput/productInput/productInput";let r=getCurrentPages(),i=!1;for(let o=0;o<r.length;o++)if(r[o].route===t){e.index.navigateBack({delta:r.length-o-1}),i=!0;break}i||e.index.navigateTo({url:"/"+t})}),500)):console.error("API returned an error",i)};return(t,i)=>({a:e.o((e=>t.$emit("close"))),b:e.t(r.receivedData.spname),c:e.t(r.receivedData.finenessname),d:e.t(r.receivedData.price),e:e.o(c),f:e.o((e=>t.$emit("close"))),g:e.o(a)})}},i=e._export_sfc(r,[["__scopeId","data-v-6df7337e"]]);wx.createComponent(i);
