"use strict";const e=require("../../common/vendor.js"),t=require("../../utils/debounce.js"),i=require("../../utils/common.js"),a={__name:"oneClickUpload",setup(a){const l=e.ref([{title:"上传图片",items:[{text:"机身背面",image:"https://www.xzxskj.com/xcximg/img_add_img@3x.png",fileList:[]},{text:"关于本机",image:"https://www.xzxskj.com/xcximg/img_add_about@3x.png",fileList:[]},{text:"屏幕息屏",image:"https://www.xzxskj.com/xcximg/img_add_closewindow@3x.png",fileList:[]}]},{title:"中框四面",items:[{text:"中框上方",image:"https://www.xzxskj.com/xcximg/img_add_upward@3x.png",fileList:[]},{text:"中框右侧",image:"https://www.xzxskj.com/xcximg/img_add_right@3x.png",fileList:[]},{text:"中框下方",image:"https://www.xzxskj.com/xcximg/img_add_downward@3x.png",fileList:[]},{text:"中框左侧",image:"https://www.xzxskj.com/xcximg/img_add_left@3x.png",fileList:[]}]},{title:"机身四角",items:[{text:"左上角",image:"https://www.xzxskj.com/xcximg/img_add_lefttop@3x.png",fileList:[]},{text:"右上角",image:"https://www.xzxskj.com/xcximg/img_add_righttop@3x.png",fileList:[]},{text:"右下角",image:"https://www.xzxskj.com/xcximg/img_add_rightdown@3x.png",fileList:[]},{text:"左下角",image:"https://www.xzxskj.com/xcximg/img_add_leftdown@3x.png",fileList:[]}]}]),o=e.ref(0),s=e.ref(""),n=e.ref(!0),x=e.ref(!1),m=t.debounce((()=>{console.log("Debounced take photo called"),(()=>{const t=e.index.createCameraContext();n.value?t.takePhoto({quality:"high",success:async t=>{s.value=t.tempImagePath,console.log("Photo taken:",t.tempImagePath);const a=l.value.flatMap((e=>e.items))[o.value];a.fileList.length>0&&a.fileList.splice(0,a.fileList.length),await i.customTakePhotoUploadFiles(t.tempImagePath,a),e.index.setStorageSync("photoData",l.value),console.log("photoData:",l.value),c()}}):e.index.showToast({title:"所有图片已上传",icon:"none"})})()}),300),g=e=>{console.log("Camera error:",e.detail)},u=()=>{const t=l.value.flatMap((e=>e.items)).flatMap((e=>e.fileList)).map((e=>e.url));console.log("fileList:",t),t.length>0&&e.index.previewImage({urls:t,current:o.value})},c=()=>{const t=l.value.flatMap((e=>e.items));o.value<t.length-1?o.value++:(n.value=!1,e.index.navigateBack())},r=()=>{o.value>0&&o.value--},f=()=>{x.value=!x.value},p=e.computed((()=>l.value.flatMap((e=>e.items))[o.value])),d=e.computed((()=>{let e;return e=o.value>0?l.value.flatMap((e=>e.items))[o.value-1]:l.value.flatMap((e=>e.items))[o.value],e.fileList.length>0?e.fileList[0].url:""}));return e.onLoad((()=>{const t=e.index.getStorageSync("photoData");t&&(l.value=t)})),(t,i)=>e.e({a:e.t(e.unref(p).text),b:e.unref(x)},(e.unref(x),{}),{c:e.o(f),d:e.unref(x)?"on":"off",e:e.o(g),f:e.unref(d)&&e.unref(o)>0},e.unref(d)&&e.unref(o)>0?e.e({g:e.unref(d)},e.unref(d)?{h:e.unref(d)}:{},{i:e.o(u)}):{},{j:e.o(((...t)=>e.unref(m)&&e.unref(m)(...t))),k:e.unref(o)>0},e.unref(o)>0?{l:e.o(r)}:{},{m:0===e.unref(o)?1:""})}},l=e._export_sfc(a,[["__scopeId","data-v-bb9ba2b9"]]);wx.createPage(l);
