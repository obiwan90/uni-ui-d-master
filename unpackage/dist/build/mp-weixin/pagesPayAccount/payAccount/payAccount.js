"use strict";const e=require("../../common/vendor.js"),l=require("../api/payAccountApi.js");if(!Array){(e.resolveComponent("custom-header")+e.resolveComponent("uv-cell")+e.resolveComponent("uv-cell-group"))()}Math||((()=>"../../components/custom-header/custom-header.js")+(()=>"../../uni_modules/uv-cell/components/uv-cell/uv-cell.js")+(()=>"../../uni_modules/uv-cell/components/uv-cell-group/uv-cell-group.js"))();const a={__name:"payAccount",setup(a){e.ref("whlnam"),e.ref("whlnam");const o=e.ref(""),u=e.ref(!1),n=e.ref([]),t=()=>{u.value=!0},s=()=>{u.value=!0,n.value=[{title:"收款姓名",placeholder:"请输入银行卡实名姓名",values:[],value:""},{title:"银行卡号",placeholder:"请输入",values:[],value:""},{title:"所属银行",placeholder:"请选择",values:[],value:""},{title:"银行预留电话",placeholder:"请输入",values:[],value:""}]},c=async()=>{for(const l of n.value)if(!l.value)return void e.index.showToast({title:`${l.title} 不能为空`,icon:"none"});/^1[3-9]\d{9}$/.test(n.value[3].value)?await v():e.index.showToast({title:"银行预留电话格式不正确",icon:"none"})},v=async()=>{const a={id:o.value,name:n.value[0].value,yhkh:n.value[1].value,khyh:n.value[2].value,khyhfh:"",ylsjhm:n.value[3].value,opid:e.index.getStorageSync("sessionInfo").opid},t=await l.apiAccountAdd(a);console.log("res:",t),200===t.code&&(e.index.showToast({title:"操作成功",icon:"success",duration:500}),u.value=!1)},r=e.ref([]);return e.onMounted((async()=>{(e=>{var l,a,u,t,s;console.log("获取到的账户列表:",e),0!==e.length?(o.value=(null==(l=e[0])?void 0:l.id)||"",n.value=[{title:"收款姓名",placeholder:"请输入银行卡实名姓名",values:[],value:(null==(a=e[0])?void 0:a.name)||""},{title:"银行卡号",placeholder:"请输入",values:[],value:(null==(u=e[0])?void 0:u.code)||""},{title:"所属银行",placeholder:"请选择",values:[],value:(null==(t=e[0])?void 0:t.yhmc)||""},{title:"银行预留电话",placeholder:"请输入",values:[],value:(null==(s=e[0])?void 0:s.ylsjhm)||""}],console.log("处理后的数据:",n.value)):console.log("没有获取到账户数据")})(await(async()=>{const a={opid:e.index.getStorageSync("sessionInfo").opid},o=await l.apiAccountList(a);return 200===o.code?o.lists:[]})()),await(async()=>{const e=await l.apiSearchBank();console.log("res：",e),200===e.code&&(console.log("data",n.value),r.value=e.lists)})()})),(l,a)=>e.e({a:0===e.unref(n).length},0===e.unref(n).length?{b:e.o(s)}:{},{c:e.unref(u)},e.unref(u)?{d:e.f(e.unref(n),((l,a,o)=>e.e({a:e.t(l.title),b:0===a||1===a||3===a},0===a||1===a||3===a?{c:l.placeholder,d:l.value,e:e.o((e=>l.value=e.detail.value),a)}:{},{f:2===a},2===a?{g:l.placeholder,h:l.value,i:e.o((e=>l.value=e.detail.value),a),j:e.unref(r),k:e.o((e=>((e,l)=>{console.log(e),l.value=r.value[parseInt(e.detail.value)].name})(e,l)),a),l:l.value}:{},{m:"1090d412-2-"+o+",1090d412-1",n:a}))),e:e.p({border:!1}),f:e.p({border:!1})}:{},{g:0!==e.unref(n).length&&!e.unref(u)},0===e.unref(n).length||e.unref(u)?{}:{h:e.t(e.unref(n)[0].value),i:e.t(e.unref(n)[2].value),j:e.t(e.unref(n)[1].value),k:e.o(t)},{l:e.unref(u)},e.unref(u)?{m:e.o(c)}:{})}},o=e._export_sfc(a,[["__scopeId","data-v-1090d412"]]);wx.createPage(o);
