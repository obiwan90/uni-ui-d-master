"use strict";const e=require("../common/vendor.js"),s=require("./qqmap-wx-jssdk.js"),t="KJXBZ-NOQR4-A4CUH-KEJWI-F25M6-REFWO";new s.QQMapWX({key:t});exports.getAddress=(s,o)=>new Promise(((a,d)=>{const r=`https://apis.map.qq.com/ws/geocoder/v1/?location=${s},${o}&key=${t}`;e.index.request({url:r,method:"GET",success:e=>{e.data&&e.data.result?(console.log(e),a(e.data.result)):d("地址获取失败")},fail:()=>{d("请求失败")}})})),exports.getLocationByAddress=s=>new Promise(((o,a)=>{const d=`https://apis.map.qq.com/ws/geocoder/v1/?address=${encodeURIComponent(s)}&key=${t}`;e.index.request({url:d,method:"GET",success:e=>{if(e.data&&e.data.result&&e.data.result.location){const{lat:s,lng:t}=e.data.result.location;o({latitude:s,longitude:t})}else a("地址解析失败")},fail:()=>{a("请求失败")}})}));
