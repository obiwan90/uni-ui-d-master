"use strict";const e=require("../../common/vendor.js"),o=require("../../api/address/address.js");if(!Array){e.resolveComponent("custom-header")()}Math;const s={__name:"address",setup(s){const n=()=>{e.index.chooseAddress({success(e){console.log(e),console.log(e.userName),console.log(e.postalCode),console.log(e.provinceName),console.log(e.cityName),console.log(e.countyName),console.log(e.detailInfo),console.log(e.nationalCode),console.log(e.telNumber),t(e)}})},d=e.ref([]),a=async()=>{const s={opid:e.index.getStorageSync("sessionInfo").opid},n=await o.apigetAddress(s);1===n.zt&&(d.value=n.lists,e.index.setStorageSync("addressList",n.lists)),console.log(n)},t=async s=>{const n=d.value.some((e=>"1"===e.zt));console.log("has:",n);const t={opid:e.index.getStorageSync("sessionInfo").opid,name:s.userName,phone:s.telNumber,province:s.provinceName,city:s.cityName,area:s.countyName,address:s.detailInfo,zt:n?"0":"1"},i=await o.apiAddAddress(t);"200"===i.code&&(e.index.showToast({title:"添加成功",icon:"success",duration:2e3}),a()),console.log(i)},i=async s=>{const n={opid:e.index.getStorageSync("sessionInfo").opid,id:s},d=await o.apiDelAddress(n);1===d.zt&&(e.index.showToast({title:"删除成功",icon:"success",duration:2e3}),a()),console.log(d)},c=e.ref("");return e.onShow((()=>{a()})),e.onLoad((e=>{void 0!==e.from&&""!==e.from&&(console.log("地址选择"),c.value=e.from),a()})),(o,s)=>({a:e.f(e.unref(d),((o,s,n)=>e.e({a:"1"===o.zt},(o.zt,{}),{b:e.t(o.name),c:e.t(o.phone),d:e.o((s=>(o=>{if(console.log("from",c.value),""!==c.value){const s=getCurrentPages();s[s.length-2].setData({selectedAddress:o}),e.index.navigateBack()}})(o)),o.id),e:e.o((s=>{return n="/pagesAddAddress/addAddress/addAddress?id="+o.id,void e.index.navigateTo({url:n});var n}),o.id),f:e.o((s=>{return n=o.id,void e.index.showModal({title:"是否删除地址簿？",success:e=>{e.confirm&&(i(n),a())}});var n}),o.id),g:e.t(o.address),h:o.id}))),b:e.o(n)})}},n=e._export_sfc(s,[["__scopeId","data-v-b723f398"]]);wx.createPage(n);
