"use strict";const e=require("../../common/vendor.js"),o=require("../../api/search/search.js"),t=require("../../utils/debounce.js");require("../../utils/modelSearch.js"),require("../../utils/wxMapAPI.js"),require("../../stores/tokenStore.js");const r=require("../../utils/system.js");require("../../stores/userInfoStore.js");const a=require("../../stores/locationStore.js");Math||n();const n=()=>"../../uni_modules/qiao-select/components/qiao-select/qiaoSelect.js",s={__name:"custom-navi-bar",setup(n){e.ref(!1);const s=e.ref(null),i=e.ref("xhname"),u=e.ref("xhname");a.useLocationStore(),e.ref(0),e.ref([{value:0,text:"绵阳市"},{value:1,text:"四川省"},{value:2,text:"全国"}]);const l=e.ref({fullLocation:"",province:"",city:"",region:"",address:"",postCode:"",longitude:"",latitude:"",name:""}),c=o=>{console.log(o.detail.value);const[t,r,a]=o.detail.value,n=o.detail.code;l.value={...l.value,province:t,city:r,region:a,postCode:n,fullLocation:`${t} ${r} ${a}`},console.log("form:"+JSON.stringify(l.value)),e.index.setStorageSync("locationForm",l.value)},d=e.computed((()=>"不限"!==l.value.region?l.value.region:"不限"!==l.value.city?l.value.city:"不限"!==l.value.province?l.value.province:"全国")),f=t.debounce((async o=>{if(o.length){console.log("输入内容:",o),e.index.showLoading({title:"加载中",mask:!0});try{await v(o)}catch(t){console.error("搜索请求失败:",t),e.index.showToast({title:"搜索失败，请重试",icon:"none"})}finally{e.index.hideLoading()}}else g.value=[]}),300,!0),v=async e=>{const t={word:e},r=await o.apiSearchModel(t);"200"===r.code?g.value=r.lists:g.value=[],console.log("apiSearchModelData res:",r)};e.onShow((async()=>{l.value=await a.useLocationStore().getForm()})),e.onMounted((async()=>{l.value=await a.useLocationStore().getForm()}));const g=e.ref([]),p=o=>{console.log(o),o&&e.index.navigateTo({url:"/pagesProduct/product/product?title="+o.xhname+"&id="+o.xhid})};return(o,t)=>e.e({a:e.unref(r.getStatusBarHeight)()+"px",b:e.unref(r.getTitleBarHeight)()+"px",c:e.unref(r.getLeftIconLeft)()+"px",d:e.unref(d)},e.unref(d)?{e:e.t(e.unref(d))}:{},{f:e.o(c),g:e.unref(d),h:e.sr(s,"5bf4d164-0",{k:"searchInput"}),i:e.o(p),j:e.o(e.unref(f)),k:e.p({keyId:1,dataList:e.unref(g),searchKey:e.unref(i),showField:e.unref(u),phText:"搜索关键字",showBorder:!1}),l:e.unref(r.getNavBarHeight)()+"px"})}},i=e._export_sfc(s,[["__scopeId","data-v-5bf4d164"]]);wx.createComponent(i);
