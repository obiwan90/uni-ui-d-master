"use strict";const e=require("../../../common/vendor.js"),a=require("../../api/api.js");if(!Array){(e.resolveComponent("uv-tabs")+e.resolveComponent("z-paging"))()}Math||((()=>"../../../uni_modules/uv-tabs/components/uv-tabs/uv-tabs.js")+(()=>"../../../uni_modules/z-paging/components/z-paging/z-paging.js"))();const l={__name:"jixingPannel",emits:["reload4Jx","close"],setup(l,{emit:o}){const i=e.ref("xlname");e.ref(!1);const n=e.ref(null),r=e.ref([]),s=e.ref(0),t=e.ref(0),u=e.ref(-1);e.ref(["全部机型","折叠机型","特价机型"]);const d=e.ref([]),c=e.ref(new Set),v=e.ref(new Set),g=e=>c.value.has(e),p=async(e,a)=>{console.log("pageNo:",e),console.log("pageSize:",a),h.value.start=e-1;const l=await B(h);console.log("data:",l);let o=[];if(l)if(1===e)o=l;else{o=[...d.value.reduce(((e,a)=>[...e,...a.products]),[]),...l]}else o=[];n.value.complete(l);const i={};o.forEach((e=>{const a=e.xlname.trim();i[a]||(i[a]=[]),i[a].push(e)})),d.value=Object.entries(i).map((([e,a])=>({name:e,products:a}))),console.log(d.value)},b=e=>{console.log("分类标签切换触发:",e.index),void 0!==e.index?(t.value=e.index,h.value.classid=m.value[t.value].id,h.value.brandid="",h.value.seriesid="",s.value=0,u.value=-1,S()):console.error("标签索引错误或标签数据不存在")},x=e=>{console.log("系列切换了标签:",e.index),void 0!==e.index?(u.value=e.index,h.value.seriesid=f.value[u.value].id,h.value.brandid=A.value[s.value].id,S()):console.error("标签索引错误")},m=e.ref([]),A=e.ref([]),f=e.ref([]);e.ref([]);const h=e.ref({classid:"1",brandid:"1",seriesid:"",start:"0"}),B=async e=>{const l={classid:e.value.classid,brandid:e.value.brandid,seriesid:e.value.seriesid,start:e.value.start},o=await a.apiGetClasstify(l);if("200"===o.code){m.value=o.classlist,A.value=o.brandlist,f.value=o.serieslist;return o.marquelist.sort(((e,a)=>parseInt(e.xlid)-parseInt(a.xlid)))}return!1},C=o,E=()=>{const a=Array.from(c.value);0!==a.length||0!==v.value.size?(C("reload4Jx",a,v.value),C("close")):e.index.showToast({title:"请选择机型",icon:"none"})},S=()=>{e.nextTick$1((()=>{n.value&&n.value.reload(!0)}))};return e.onShow((()=>{console.log("show")})),(a,l)=>({a:e.o((e=>a.$emit("close"))),b:e.o(b),c:e.p({list:m.value,lineColor:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAXCAYAAACmnHcKAAAAAXNSR0IArs4c6QAABHFJREFUWEfdV19oW2UU/51zb5Kma9euTVL0SZn/KCLDJulwLVTaZPoyEKwUZDKn+DBEmD4Mp4LIFNmLg8FQ2PRFHFLUaVUw6VwRNmnS+ocOdQiiIErbxNm1a5t7c78jX7bUNDa5Sdk68L6EfN853/n9zvl959xL+B89VOQiABEg2YHu7YpVDwR+Ap0PJFMf3Wi+pdjyLL0s0qCIpjoSqVOl2Ipk9K9Mx6NvMvAEAANXyFkCZM1Gq3PLqe/+vkGkKmMTyRiiOttGJ+c0tpXKzMYj7zYaxqOLjlqFmYmglPo2kEyHCVi9uUHsXLBNBJPpyAqZzM5wVITPAGishE8gz4cS6dc3CP9KmOlYeAcTjwJoWCs2AXkRPBZMpk4WKpOJR54R0JHSSpU7imCpyaY7GsfGf98oQtLV5cm0GSeYsLuSJLRyIDjUnhh/qUBmOh7Zx8BRgLgSUC8TckqdDWbV/TQ5aW8EoWy8+2GDMWwrqRiONRfBq4FE6sUrlXkgEhFFWmabqoH0MWtCny5YjYO3jo0tX09CmVj0IYF8QERUmUoBQU4Eu0PJ1PC/DSAW+dhg3uVIdddCa4G8F8iqPderQjPx8F6AjhHI55owwW/BZOqWVd3sTB/Mu73RDBO1KBdCm00D83nnbcehgx2nx6ddA9Zo8EdfV8Bj0uM+0zxsKQWXisBvMBYtZyh0Ov3+KjL6z0z/vb0e0/OVbg9uz1XJ/Qil9gVHJ8bc7N32M7HIHkW038d0j1XljhTP8RDBEnUhlEjfVVxbkZlekMFBY2bu12Mm6Kl6BooIThiX6Nn28fFLbqDL92f7w0Ni0CGTeKubxMt8HQNqW1ti4vyaZPTixb5trXmv9xMvU28tGdI+uko6K0uOOg5SHxqGMdXWND9Dwz9YxUC6zWZbvCExnJvA6BAlvQA92WQa7UtKwU3a/xkVSvaGRtPvlK6vqkxxY3bXjmbk7M8biHuWVe018jDB1ukl+YXAWSGxoJDTDV9EmgFqAxD0MrVoIeeVuN6LMhLS6jFpzsq/EEimXisnuCYZbfTXQFeLQ8Y5InS636B6xbU+ey8RbCUHAsnU4bVOqEim0BBi3bcTyYiP+c5cHRVaH9TKXnqSO5AciXo6mJw8XsmyKhntNN3f3WGwHN1k8uBC2UvotQa91nn6zcNyxCZWPYEvJlLVYrqSWblHscgrRHQAgHcjZFcYzgJbgCQtzg0Fz16Yd0tezWQKshuIPMKM5zzM0byg7g7kBkbv6yaiQVlKvgTkSDCRHqnFT9vURabYGATmgEPqLb9htNfT7aqB8jJDS2rBdj4jyBvtreY5Gv56qVYi6yJTenhmZ/igKN4PKnwH+elqctxkWJJBLaNlQBYgcjKwOP8y1SCndTcAt8zoYXgxYGxXCvcBEhWirSSyRYhaGdjcbBqFWaLHz2VH5QH8KZCfCPheKZnyML4pneJu8a5JA6glyM8P3uYLLDX5l/3kMRWbLGzaINPHLPp7wWORbfuWLTH58s0jk4u1nFmPzT/Acc8nAVrxrAAAAABJRU5ErkJggg==') 100% 100%",lineWidth:"25",lineHeight:"8",fontSize:32,activeStyle:{color:"#303133",fontWeight:"bold"},current:t.value}),d:e.f(A.value,((a,l,o)=>({a:e.t(a.name),b:l,c:l===s.value?1:"",d:e.o((e=>(e=>{s.value=e,h.value.brandid=A.value[e].id,h.value.seriesid="",u.value=-1,S()})(l)),l)}))),e:"900rpx",f:e.o(x),g:e.p({list:f.value,lineWidth:"0",lineHeight:"0",fontSize:24,keyName:i.value,activeStyle:{padding:"0 10rpx",fontSize:"28rpx",backgroundColor:"#FFEEEC",color:"#ED5446",fontWeight:"bold",backGround:"#FFEEEC",borderRadius:"4rpx 4rpx 4rpx 4rpx"},inactiveStyle:{padding:"0 10rpx",fontSize:"24rpx",backgroundColor:"#F2F3F6",borderRadius:"4rpx 4rpx 4rpx 4rpx",opacity:.6},current:u.value}),h:e.f(d.value,((a,l,o)=>({a:e.t(a.name),b:e.f(a.products,((a,l,o)=>({a:e.t(a.qcname),b:l,c:g(a)?1:"",d:e.o((l=>(a=>{v.value.has("全部机型")?e.index.showToast({title:"已选择全部机型，不能选择单个型号",icon:"none"}):(c.value.clear(),c.value.add(a),E())})(a)),l)}))),c:l}))),i:e.sr(n,"6051bbc7-2",{k:"paging"}),j:e.o(p),k:e.o((e=>r.value=e)),l:e.p({"show-refresher-update-time":!0,"default-page-size":20,fixed:!1,modelValue:r.value})})}},o=e._export_sfc(l,[["__scopeId","data-v-6051bbc7"]]);wx.createComponent(o);
