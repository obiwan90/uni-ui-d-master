"use strict";const e=require("../../common/vendor.js"),n=require("../../utils/common.js"),s=require("../api/api.js");if(!Array){(e.resolveComponent("custom-header")+e.resolveComponent("van-loading")+e.resolveComponent("van-image")+e.resolveComponent("uni-popup"))()}const a=()=>"../../uni_modules/uni-popup/components/uni-popup/uni-popup.js";Math||((()=>"../../components/custom-header/custom-header.js")+e.unref(t)+a)();const t=()=>"./components/userServicePannel.js",o={__name:"shOrderDetail",setup(a){const t=e.ref(null),o=e.ref(!1),r=()=>{t.value.close()},i=e=>{e||(o.value=e.show)},u=()=>{o.value=!0,t.value.open()},l=e.ref(),f=e.ref();e.ref();const c=e.ref([{name:"售后订单",value:"",image:"https://www.xzxskj.com/xcximg/icon_copy@3x.png"},{name:"申请时间",value:"",image:""},{name:"销售订单",value:"",image:"https://www.xzxskj.com/xcximg/icon_copy@3x.png"},{name:"下单时间",value:"",image:""},{name:"付款时间",value:"",image:""},{name:"收货时间",value:"",image:""},{name:"下单备注",value:"",image:""}]);e.ref([{shlx:"2",tyzt:"6",btnLeft:"驳回售后",btnRight:"商家已同意售后，请立即预约发货",btnCenter:""},{shlx:"4",tyzt:"6",btnLeft:"驳回售后",btnRight:"商家已同意售后，请立即预约发货",btnCenter:""}]),e.ref([{name:"驳回售后",lx:"7"},{name:"同意补差",lx:"2"},{name:"同意售后",lx:"3"},{name:"已收到货,同意退款",lx:"4"},{name:"售后完成,预约快递",lx:"5"},{name:"预约快递",lx:"6"},{name:"同意退款",lx:"8"}]),e.ref();const m=async()=>{const e={lx:f.value.lx,id:f.value.id},a=await s.apiGetCustomServiceOrderDetail(e);"200"===a.code&&(l.value=a.infos,console.log("infos",l.value),c.value[0].value=a.infos.ordernumber,c.value[1].value=n.formatTimestamp(a.infos.shaddtime),c.value[2].value=a.infos.ydh,c.value[3].value=n.formatTimestamp(a.infos.add_time),c.value[4].value=n.formatTimestamp(a.infos.pay_time),c.value[5].value=a.infos.remarks)},d=async n=>{console.log("进来这里了吗"),await(async(n,a)=>{const t={id:f.value.id,lx:n};try{const n=await s.apiCustomServiceOrderOperation(t);200===n.code?await p(a.expressid,a.id):e.index.showToast({title:n.message||"操作失败",icon:"none",duration:2e3})}catch(o){console.error("请求出错:",o),e.index.showToast({title:"请求出错，请稍后再试",icon:"none",duration:2e3})}})("2"===l.value.shlx?"4":"5",n)},p=(e,n)=>{"1"===e&&x(n),"2"===e&&h(n)},x=async n=>{const a={ddid:n},t=await s.apiOrderJdLogistics(a);console.log(t),"200"===t.code&&(e.index.showToast({title:"操作成功",icon:"success",duration:1e3}),setTimeout((()=>{m()}),500))},h=async n=>{const a={ddid:n},t=await s.apiOrderSfLogistics(a);console.log(t),"200"===t.code&&(e.index.showToast({title:"操作成功",icon:"success",duration:1e3}),setTimeout((()=>{m()}),500))};return e.onMounted((async()=>{f.value=JSON.parse(e.index.getStorageSync("orderDetailItem")),console.log(f.value),await m()})),(n,s)=>e.e({a:e.unref(l)},e.unref(l)?e.e({b:"5"===e.unref(l).shlx},(e.unref(l).shlx,{}),{c:"1"===e.unref(l).shlx},(e.unref(l).shlx,{}),{d:"2"===e.unref(l).shlx},(e.unref(l).shlx,{}),{e:"4"===e.unref(l).shlx},(e.unref(l).shlx,{}),{f:"2"===e.unref(l).zt},(e.unref(l).zt,{}),{g:"3"===e.unref(l).zt},(e.unref(l).zt,{}),{h:"3"===e.unref(l).zt},(e.unref(l).zt,{}),{i:"2"===e.unref(l).shlx&&"5"===e.unref(l).tyzt},("2"===e.unref(l).shlx&&e.unref(l).tyzt,{}),{j:"4"===e.unref(l).shlx&&"6"===e.unref(l).tyzt},("4"===e.unref(l).shlx&&e.unref(l).tyzt,{}),{k:e.f(e.unref(l).goodslist,((n,s,a)=>e.e({a:"56ae16bf-2-"+a+",56ae16bf-1-"+a,b:"56ae16bf-1-"+a,c:e.p({width:"190rpx",height:"190rpx",fit:"fill",radius:"18rpx",src:n.infos.cover}),d:n.infos.finenessname},n.infos.finenessname?{e:e.t(n.infos.finenessname)}:{},{f:e.t(n.infos.name),g:e.t(n.infos.ch),h:e.t(n.infos.cgyname),i:e.t(n.infos.shopname),j:e.t(n.infos.price),k:s}))),l:e.p({type:"spinner",size:"20",vertical:!0}),m:"4"!==e.unref(l).shlx},"4"!==e.unref(l).shlx?{n:e.t("5"==e.unref(l).shlx?e.unref(l).price:e.unref(l).bcje)}:{},{o:e.t("5"==e.unref(l).shlx?e.unref(l).remarks:e.unref(l).shyy),p:""!==e.unref(l).shtt},""!==e.unref(l).shtt?{q:e.f(e.unref(l).shtt.split(","),((e,n,s)=>({a:e,b:n})))}:{},{r:e.f(e.unref(c),((n,s,a)=>e.e({a:e.t(n.name),b:e.t(n.value),c:""!==n.image},""!==n.image?{d:n.image}:{},{e:s}))),s:"2"===e.unref(l).shlx&&"6"===e.unref(l).tyzt&&"4"!==e.unref(l).ddlx||"4"===e.unref(l).shlx&&"5"===e.unref(l).tyzt&&"4"!==e.unref(l).ddlx},"2"===e.unref(l).shlx&&"6"===e.unref(l).tyzt&&"4"!==e.unref(l).ddlx||"4"===e.unref(l).shlx&&"5"===e.unref(l).tyzt&&"4"!==e.unref(l).ddlx?{t:e.o(u)}:{}):{},{v:e.unref(o)},e.unref(o)?{w:e.o(d),x:e.o(r),y:e.p({infos:e.unref(l)})}:{},{z:e.sr(t,"56ae16bf-3",{k:"saiXuanPannelPopup"}),A:e.o(r),B:e.o(i),C:e.p({"background-color":"rgba(0,0,0,0)","is-mask-click":!0,"safe-area":!1,type:"bottom"})})}},r=e._export_sfc(o,[["__scopeId","data-v-56ae16bf"]]);wx.createPage(r);
