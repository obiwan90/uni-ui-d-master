"use strict";const e=require("../../../common/vendor.js"),t=require("../../api/api.js");if(!Array){(e.resolveComponent("uni-datetime-picker")+e.resolveComponent("uv-transition"))()}Math||((()=>"../../../uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker.js")+(()=>"../../../uni_modules/uv-transition/components/uv-transition/uv-transition.js"))();const n={__name:"exportLog",emits:["close"],setup(n,{expose:o,emit:r}){const a=r,u=e.getCurrentInstance(),i=e.ref(!0),s=e.ref(!1),l=e.ref(""),c=e.ref(""),m=e.ref([{name:"全部",zt:"1"},{name:"上架中",zt:"2"}]),p=e.ref(0),f=e=>{console.log(e),l.value=e.detail.value},d=()=>{i.value=!1,setTimeout((()=>{s.value=!0}),400)};function v(e){const t=new Date(e.replace(/-/g,"/")),n=Math.floor(t.getTime()/1e3);return console.log(n),n}const g=async()=>{await(async()=>{const n={zt:m.value[p.value].zt,sjkssj:v(l.value),sjjssj:v(c.value)},o=await t.apiExportExcel(n);"200"===o.code&&u&&u.proxy&&""!==o.lj?(u.proxy.copyText(o.lj),setTimeout((()=>{a("close")}),500)):e.index.showToast({title:"操作失败",icon:"error"})})()};return o({initTime:()=>{const e=(()=>{const e=new Date;return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")} ${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}:${String(e.getSeconds()).padStart(2,"0")}`})();l.value=e,c.value=e}}),(t,n)=>({a:e.o((e=>t.$emit("close"))),b:e.t(e.unref(l)?e.unref(l):"开始时间"),c:e.o(f),d:e.o((t=>e.isRef(l)?l.value=t:null)),e:e.p({type:"datetime",border:!1,modelValue:e.unref(l)}),f:e.t(e.unref(c)?e.unref(c):"结束时间"),g:e.o(t.onTimeChange2),h:e.o((t=>e.isRef(c)?c.value=t:null)),i:e.p({type:"datetime",border:!1,modelValue:e.unref(c)}),j:e.f(e.unref(m),((t,n,o)=>e.e({a:e.t(t.name),b:e.unref(p)===n},(e.unref(p),{}),{c:n,d:e.unref(p)===n?1:"",e:e.o((e=>(e=>{p.value=e})(n)),n)}))),k:e.o(((...e)=>t.cancel&&t.cancel(...e))),l:e.o(d),m:e.p({show:e.unref(i),mode:"fade"}),n:e.o((e=>t.$emit("close"))),o:e.t(e.unref(m)[e.unref(p)].name),p:e.t(e.unref(l)),q:e.t(e.unref(c)),r:e.o(g),s:e.p({show:e.unref(s),mode:"fade"})})}},o=e._export_sfc(n,[["__scopeId","data-v-1b87e557"]]);wx.createComponent(o);
