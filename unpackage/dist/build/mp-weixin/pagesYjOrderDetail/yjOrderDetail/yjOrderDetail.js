"use strict";const e=require("../../common/vendor.js"),t=require("../../api/address/address.js");if(!Array){(e.resolveComponent("custom-header")+e.resolveComponent("uv-count-down")+e.resolveComponent("van-image"))()}Math||((()=>"../../components/custom-header/custom-header.js")+(()=>"../../uni_modules/uv-count-down/components/uv-count-down/uv-count-down.js"))();const n={__name:"yjOrderDetail",setup(n){const o=e.ref(),r=e.ref([{zt:"2",text:"议价成功后默认购买成功,等待发货"},{zt:"3",text:"议价成功等待发货"},{zt:"4",text:""}]),s=e=>{const t=r.value.find((t=>t.zt===e.toString()));return t?t.text:""},a=(e,t)=>{console.log("addTime:",e),console.log("bargainingTimeName:",t);const n=(new Date).getTime();return new Date(1e3*parseInt(e)+3600*parseInt(t)*1e3).getTime()-n},i=e.ref([{zt:"2",text:"等待确认议价"},{zt:"3",text:"议价成功等待发货"},{zt:"4",text:"议价失败"}]),u=e=>{console.log("zt:",e);const t=i.value.find((t=>t.zt===e.toString()));return t?t.text:""},g=e.ref([{zt:"2",btns:[]},{zt:"3",btns:[{text:"联系客服",image:"https://www.xzxskj.com/xcximg/icon_kefu@3x.png"},{text:"催发货",image:"https://www.xzxskj.com/xcximg/icon_cuifahuo@3x.png"}]},{zt:"4",btns:[]}]),f=e=>{const t=g.value.find((t=>t.zt===e));return t?t.btns:[]};e.ref([{image:"https://www.xzxskj.com/xcximg/icon_shunfeng@3x.png",value:"顺丰"},{image:"https://www.xzxskj.com/xcximg/icon_jingdong@3x.png",value:"京东"},{image:"https://www.xzxskj.com/xcximg/icon_songhuo@3x.png",value:"送货上门"},{image:"https://www.xzxskj.com/xcximg/icon_ziti@3x.png",value:"自提"}]);const c=e.ref(),m=e=>{console.log(e),console.log("进来了吗");let t=[];return"2"===e.zt&&(e.goodsinfos.gjbbname&&t.push(e.goodsinfos.gjbbname),e.goodsinfos.wlbbname&&t.push(e.goodsinfos.wlbbname),e.goodsinfos.bxzt&&t.push(e.goodsinfos.bxzt),e.goodsinfos.efficiency&&t.push(`电池${e.goodsinfos.efficiency}%`),e.goodsinfos.delivery&&t.push(`${e.goodsinfos.delivery}发货`)),t.join("丨")},d=e.ref([{name:"订单号",value:"NO.202303281234",image:"https://www.xzxskj.com/xcximg/icon_copy@3x.png",zt:["2","3","4"]},{name:"议价时间",value:"",image:"",zt:["2","3","4"]},{name:"议价成功",value:"",image:"",zt:["3"]},{name:"议价失败",value:"2024-03-12 15:00:00",image:"",zt:["4"]}]);return e.onMounted((async()=>{const n=e.index.getStorageSync("orderDetailItem");console.log("itemString:",n),n&&(o.value=JSON.parse(n),d.value[0].value="NO."+o.value.ordernumber,d.value[1].value=(e=>{const t=new Date(1e3*e);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}:${String(t.getSeconds()).padStart(2,"0")}`})(o.value.add_time),await(async e=>{const n={id:e},o=await t.apigetAddressDetail(n);c.value=o.info,console.log(o)})(o.value.addressid))})),(t,n)=>{return e.e({a:e.t(u(e.unref(o).zt)),b:"2"===e.unref(o).zt},"2"===e.unref(o).zt?{c:e.p({time:a(e.unref(o).pay_time,e.unref(o).bargainingtimename),format:"HH:mm:ss"})}:{},{d:s(e.unref(o).zt)},s(e.unref(o).zt)?{e:e.t(s(e.unref(o).zt))}:{},{f:f(e.unref(o).zt).length},f(e.unref(o).zt).length?{g:e.f(f(e.unref(o).zt),((n,o,r)=>e.e({a:n.image,b:e.t(n.text),c:"联系客服"===n.text},"联系客服"===n.text?{d:e.o(((...e)=>t.onContact&&t.onContact(...e)),o)}:{},{e:o,f:e.o((e=>t.handleBtnClick(n)),o)})))}:{},{h:e.p({width:"190rpx",height:"190rpx",radius:"18rpx",fit:"fill",src:e.unref(o).goodsinfos.cover}),i:e.t(e.unref(o).goodsinfos.finenessname),j:e.t(e.unref(o).goodsinfos.name),k:"1"===e.unref(o).goodsinfos.zt},"1"===e.unref(o).goodsinfos.zt?{l:e.t(m(e.unref(o)))}:{m:e.t(e.unref(o).goodsinfos.ch)},{n:e.t(e.unref(o).price),o:e.t(e.unref(o).goodsinfos.price),p:e.t(e.unref(o).price),q:e.o(((...e)=>t.openRule&&t.openRule(...e))),r:"1"!==e.unref(o).lx},(e.unref(o).lx,{}),{s:e.t(e.unref(o).price),t:e.unref(c)},e.unref(c)?{v:e.t(e.unref(c).province),w:e.t(e.unref(c).city),x:e.t(e.unref(c).area),y:e.t(e.unref(c).address),z:e.t(e.unref(c).name),A:e.t(e.unref(c).phone)}:{},{B:e.t(e.unref(o).remarks),C:e.f((r=e.unref(o).zt,d.value.filter((e=>e.zt.includes(r)))),((t,n,o)=>e.e({a:e.t(t.name),b:e.t(t.value),c:t.image},t.image?{d:t.image}:{},{e:n})))});var r}}},o=e._export_sfc(n,[["__scopeId","data-v-91fff765"]]);wx.createPage(o);
