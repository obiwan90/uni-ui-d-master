"use strict";const t=require("../common/vendor.js"),o=require("../utils/wxMapAPI.js"),e=t.defineStore("location",{state:()=>({form:{fullLocation:"",province:"",city:"",region:"",address:"",postCode:"",longitude:"",latitude:"",name:""}}),actions:{async getForm(){let e=t.index.getStorageSync("locationForm");if(e)this.form=e;else try{const i=await t.index.getLocation({type:"gcj02",altitude:!0});this.form.longitude=i.longitude,this.form.latitude=i.latitude;const r=await o.getAddress(i.latitude,i.longitude);this.form.city=r.address_component.city,this.form.province=r.address_component.province,this.form.region=r.address_component.district,this.form.fullLocation=`${r.address_component.province} ${r.address_component.city} ${r.address_component.district}`,this.form.address=r.address,e=this.form,t.index.setStorageSync("locationForm",this.form)}catch(i){console.error("定位或获取地址信息失败：",i)}return this.form}}});exports.useLocationStore=e;
