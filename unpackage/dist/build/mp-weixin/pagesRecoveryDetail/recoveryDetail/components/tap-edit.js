"use strict";const e=require("../../../common/vendor.js"),o=require("../../../api/recovery/recovery.js");if(!Array){(e.resolveComponent("van-tag")+e.resolveComponent("uni-popup-dialog")+e.resolveComponent("uni-popup"))()}Math||((()=>"../../../uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.js")+(()=>"../../../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();const a={__name:"tap-edit",props:{name:{type:String,default:""},flid:{type:String,default:""},ppid:{type:String,default:""}},setup(a){const n=a,i=e.ref(!1),l=e.ref(null),p=e.ref(!0),t=e.ref(null),s=()=>{i.value=!1,console.log("close"),l.value.close()},u=async e=>{console.log("confirm",e),await f(t.value.id,e),l.value.close(),i.value=!1},r=e.ref([]),d=async()=>{const e={flid:n.flid,ppid:n.ppid},a=await o.apiLabelList(e);200===a.code&&(r.value=a.lists)},c=async(a,n)=>{const i={djid:a,bqid:n},l=await o.apiLabelDel(i);200===l.code&&e.index.showToast("删除成功"),console.log("res:",l)},f=async(a,n)=>{const i={djid:a,name:n},l=await o.apiLabelAdd(i);200===l.code&&(e.index.showToast("添加成功"),await d()),console.log("res:",l)};return e.onMounted((async()=>{await d()})),(o,a)=>e.e({a:e.t(n.name),b:e.o((e=>o.$emit("close"))),c:e.f(e.unref(r),((o,a,n)=>e.e({a:e.t(o.djname),b:e.o((e=>(e=>{i.value=!0,console.log("openDialog",e),t.value=e,l.value.open()})(o)),a)},e.unref(p)?{c:e.f(o.bqlist,((a,i,l)=>({a:e.t(a.name),b:i,c:e.o((e=>(async(e,o)=>{console.log("标签关闭：",o),await c(e.id,o),await d()})(o,a.id)),i),d:"7202b5f8-0-"+n+"-"+l}))),d:e.p({closeable:!0,size:"large",color:"linear-gradient( 131deg, #FFCE7B 0%, rgba(255,153,100,0.98) 55%, #FF9057 100%)",textColor:"#FFFFFF"})}:{},{e:a}))),d:e.unref(p),e:e.unref(i)},e.unref(i)?{f:e.o(s),g:e.o(u),h:e.p({mode:"input",message:"成功消息",title:"输入标签名","before-close":!0})}:{},{i:e.sr(l,"7202b5f8-1",{k:"popup"}),j:e.p({type:"dialog"})})}},n=e._export_sfc(a,[["__scopeId","data-v-7202b5f8"]]);wx.createComponent(n);
