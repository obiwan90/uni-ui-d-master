"use strict";const e=require("../../common/vendor.js"),t=require("../api/api.js"),i=require("../../utils/common.js");if(!Array){(e.resolveComponent("custom-header")+e.resolveComponent("uv-count-down")+e.resolveComponent("z-paging"))()}Math||((()=>"../../components/custom-header/custom-header.js")+(()=>"../../uni_modules/uv-count-down/components/uv-count-down/uv-count-down.js")+(()=>"../../uni_modules/z-paging/components/z-paging/z-paging.js"))();const n={__name:"marketCount",setup(n){e.ref(0);const o=e.ref(!1),r=e=>{o.value=!1,i.navigateToPage("pages/home/home")},s=e.ref({}),a=e=>{s.value=e},p=e.ref(null),l=e.ref([]),B=async(e,t)=>{console.log("pageNo:",e),console.log("pageSize:",t),await v(e-1),p.value.complete(g.value)},G=(t,i)=>{const n=JSON.stringify(i);"1"===t&&e.index.navigateTo({url:`/pagesSell/sell/sell?item=${encodeURIComponent(n)}`}),"2"===t&&e.index.navigateTo({url:`/pagesSeeking/seeking/seeking?item=${encodeURIComponent(n)}`})};e.ref(!0);const c=e.ref(0),d=e.ref([{name:"卖货(56)"},{name:"求货(56)"},{name:"交流(56)"}]);e.computed((()=>d.value.map((e=>({name:e.name})))));const m=e.ref([{title:"修改",image:"/pagesMarketCount/static/icon_xiugai@3x.png"},{title:"删除",image:"/pagesMarketCount/static/icon_delete@3x.png"}]),f=e.ref([{id:1,type:"0",fineness:"99新",price:"14120",time:54e6,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:2,type:"0",fineness:"97新",price:"500",time:36e6,title:"iphone14 pro max"},{id:3,type:"0",fineness:"99新",price:"10000",time:36e5,title:"vivo x3 12GB+512GB"},{id:4,type:"0",fineness:"95新",price:"2000",time:72e5,title:"步步高 x3 12GB+512GB"},{id:5,type:"0",fineness:"95新",price:"3213",time:144e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:6,type:"0",fineness:"99新",price:"500",time:18e6,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:7,type:"0",fineness:"89新",price:"100",time:216e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"99新",price:"14120",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"97新",price:"500",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"99新",price:"10000",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"95新",price:"2000",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"95新",price:"3213",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"99新",price:"500",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"89新",price:"100",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"99新",price:"14120",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"97新",price:"500",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"99新",price:"10000",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"95新",price:"2000",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"95新",price:"3213",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"99新",price:"500",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"0",fineness:"89新",price:"100",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"99新",price:"14120",time:36e6,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"97新",price:"500",time:324e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"99新",price:"10000",time:144e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"95新",price:"2000",time:108e6,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"95新",price:"3213",time:18e6,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"99新",price:"500",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"89新",price:"100",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"97新",price:"500",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"99新",price:"10000",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"95新",price:"2000",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"95新",price:"3213",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"99新",price:"500",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"89新",price:"100",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"99新",price:"14120",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"97新",price:"500",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"99新",price:"10000",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"95新",price:"2000",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"95新",price:"3213",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"1",fineness:"89新",price:"100",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:36e6,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:324e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:144e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:108e6,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:18e6,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"},{id:8,type:"2",fineness:"",price:"",time:504e5,title:"华为Mate 60 Pro 12GB+512GB 雅丹黑华为Mate 60 Pro 12GB+512GB 雅丹黑"}]),u=e.computed((()=>f.value.filter((e=>e.type===c.value+""))));function M(e,t){const i=1e3*e+60*t*60*1e3-Date.now();return console.log("countdownMilliseconds：",i),i>0?i:0}const P=(t,i)=>{let n=encodeURIComponent(JSON.stringify(i));"0"===t?e.index.navigateTo({url:"/pagesNewSell/newSell/newSell?data="+n}):"1"===t?e.index.navigateTo({url:"/pagesNewSeeking/newSeeking/newSeeking?id="+id}):e.index.navigateTo({url:"/pagesNewPosting/newPosting/newPosting?id="+id})},y=e=>{w(e.id)},g=e.ref([]),v=async i=>{const n={opid:e.index.getStorageSync("sessionInfo").opid,lx:c.value,start:i},o=await t.apigetMarketListAll(n);"200"===o.code&&(g.value=o.lists.map((e=>({...e,countdown:M(e.add_time,e.duration)})))),console.log("market res:",o)},w=async i=>{const n={id:i},o=await t.apiDelMine(n);console.log("res",o),"200"===o.code&&(e.index.showToast({title:"操作成功",icon:"success",duration:500}),setTimeout((()=>{p.value.reload(!0)}),500))};return e.onLoad((e=>{console.log("传递过来的参数:",e.type),e.type&&(c.value=parseInt(e.type)),e.from&&(o.value=!0)})),e.onShow((()=>{p&&p.value&&p.value.reload(!0)})),(t,i)=>e.e({a:e.unref(o)},e.unref(o)?{b:e.unref(o),c:e.o(r)}:{},{d:e.p({backgroundColor:"#FFFFFF"}),e:e.f(e.unref(l),((t,i,n)=>e.e({a:e.t(t.fineness),b:e.t("1"===t.type?"卖货价:":"求货价:"),c:e.t(t.price),d:t.countdown>0},t.countdown>0?{e:e.o(a,i),f:"6f527920-2-"+n+",6f527920-0",g:e.p({time:t.countdown,format:"DD:HH:mm:ss",autoStart:!0,millisecond:!0})}:{},{h:e.o((e=>G(t.type,t)),i),i:e.t(t.fullname),j:e.o((e=>G(t.type,t)),i),k:e.f(e.unref(m),((i,n,o)=>({a:i.image,b:e.t(i.title),c:n,d:e.o((n=>"修改"===i.title?P(e.unref(c)+"",t):y(t)),n)}))),l:i}))),f:0===e.unref(c)||1===e.unref(c),g:e.f(e.unref(u),((t,i,n)=>({a:e.t(t.title),b:e.f(e.unref(m),((t,i,n)=>({a:t.image,b:e.t(t.title),c:i,d:e.o((i=>"修改"===t.title?P(e.unref(c)+"",t):y(t)),i)}))),c:i}))),h:2===e.unref(c),i:e.sr(p,"6f527920-0",{k:"paging"}),j:e.o(B),k:e.o((t=>e.isRef(l)?l.value=t:null)),l:e.p({"loading-more-custom-style":{background:"#f3f2f6"},"default-page-size":10,modelValue:e.unref(l)})})}},o=e._export_sfc(n,[["__scopeId","data-v-6f527920"]]);wx.createPage(o);
