"use strict";const e=require("../../common/vendor.js"),o=require("../../utils/common.js"),n=require("../api/api.js");if(!Array){(e.resolveComponent("custom-header")+e.resolveComponent("van-tag")+e.resolveComponent("z-paging"))()}Math||((()=>"../../components/custom-header/custom-header.js")+a+(()=>"../../uni_modules/z-paging/components/z-paging/z-paging.js"))();const a=()=>"../../uni_modules/qiao-select/components/qiao-select/qiaoSelect.js",r={__name:"imeiTrack",setup(a){const r=e.getCurrentInstance(),t=e.ref(null),s=async()=>{i();try{const e=await o.scanCode();console.log("result",e),e&&h(e).then((()=>{p.value.length>0&&(t.value.inputText=p.value[0].ch)}))}catch(e){console.error("扫码失败：",e)}finally{c()}},i=()=>{e.index.showLoading({title:"加载中...",mask:!0})},c=()=>{e.index.hideLoading()};const l=e.ref(),u=e.ref("ch"),f=e.ref("ch"),d=e.ref(null),g=e.ref([]);e.ref(!0);const m=async(e,o)=>{console.log("pageNo:",e),console.log("pageSize:",o),console.log("id:",v.value);const n=await z(v.value,e-1);d.value.complete(n)},p=e.ref([]),h=e=>{console.log("输入框内容:",e),e.length>0&&x(e)},v=e.ref(""),k=e.ref(),y=e=>{console.log("模糊搜索 e",e),k.value=e,v.value=e.id,g.value=[],m()},x=async o=>{const a={ch:o,opid:e.index.getStorageSync("sessionInfo").opid},r=await n.apiImeiTrackSearch(a);200===r.code?p.value=r.lists:p.value=[],console.log("apiFinanceChCheckData res:",r)},z=async(e,o)=>{const a={id:e,start:o},r=await n.apiImeiTrackList(a);return 1===r.zt?(l.value=r.infos,r.lists):(console.log("res:",r),[])};return(n,a)=>{return e.e({a:e.p({backgroundColor:"#f3f2f6"}),b:e.sr(t,"33663479-1",{k:"myInputRef"}),c:e.o(h),d:e.o(y),e:e.p({keyId:1,dataList:e.unref(p),phText:"请输入串号",searchKey:e.unref(u),showField:e.unref(f),showBorder:!1,disabled:!1}),f:e.o(s),g:e.unref(k)},e.unref(k)?e.e({h:e.unref(l).zt},e.unref(l).zt?{i:e.t((i=e.unref(l).zt,{1:"上架",2:"下架",3:"临时下架",4:"退出仓库",5:"平台已售",6:"线下已售",7:"先货后款"}[i]||"未知状态")),j:e.p({size:"mini",color:"linear-gradient( 132deg, #FF9954 0%, #FF9954 100%)"})}:{},{k:e.t(e.unref(k).name),l:e.t(e.unref(k).ch),m:e.o((o=>e.unref(r).proxy.copyText(e.unref(k).ch))),n:e.t(e.unref(k).cgyname),o:e.t(e.unref(k).ckname)}):{},{p:e.f(e.unref(g),((n,a,r)=>({a:e.t(n.mk),b:e.t(n.mklx),c:"33663479-4-"+r+",33663479-3",d:e.p({size:"mini",color:{background:`linear-gradient(132deg, ${n.color} 0%, ${n.color} 100%)`}}),e:e.t(n.username),f:e.t(e.unref(o.formatTimestamp)(n.add_time)),g:a}))),q:e.sr(d,"33663479-3",{k:"paging"}),r:e.o(m),s:e.o((o=>e.isRef(g)?g.value=o:null)),t:e.p({"show-refresher-update-time":!0,fixed:!1,modelValue:e.unref(g)})});var i}}},t=e._export_sfc(r,[["__scopeId","data-v-33663479"]]);wx.createPage(t);
