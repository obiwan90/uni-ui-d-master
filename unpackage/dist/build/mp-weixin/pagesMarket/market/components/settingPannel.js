"use strict";const e=require("../../../common/vendor.js"),t={__name:"settingPannel",emits:["close"],setup(t,{emit:a}){let n=a;const l=e.index.getStorageSync("locationForm"),o=e.index.getStorageSync("messageSetting"),i=e.ref([{title:"receiveRange",text:"接收范围",left:"选择地区"},{title:"acceptRogin",text:"发布地点",left:"选择地区"},{title:"phone",text:"联系方式",left:"联系电话",value:""}]),s=e.ref(["求货信息","卖货信息","交流信息"]),u=e.ref({messageType:o?o.messageType:[],receiveRange:o?o.receiveRange:{value:l.region},acceptRogin:o?o.acceptRogin:{value:l.region},phone:o?o.phone:JSON.parse(e.index.getStorageSync("userInfo")).phone}),c=()=>{e.index.navigateBack()},g=e.ref(!1);e.watch([()=>u.value.messageType,()=>u.value.phone],(()=>{console.log("触发了"),g.value=u.value.messageType.length>0&&""!==u.value.phone}));const v=()=>{g.value?(e.index.setStorageSync("messageSetting",u.value),n("close")):e.index.showToast({title:"请完整填写所有必填项",icon:"none",duration:2e3})};return e.onMounted((()=>{console.log("messageSettings:",u.value),g.value=u.value.messageType.length>0&&""!==u.value.phone,console.log(g.value)})),(t,a)=>({a:e.o(c),b:e.f(e.unref(s),((t,a,n)=>{return{a:e.t(t),b:a,c:e.o((e=>(e=>{const t=u.value.messageType.indexOf(e);-1===t?u.value.messageType.push(e):u.value.messageType.splice(t,1),g.value=u.value.messageType.length>0&&""!==u.value.phone})(t)),a),d:(l=t,u.value.messageType.includes(l)?1:"")};var l})),c:e.f(e.unref(i),((t,a,n)=>e.e({a:e.t(t.text),b:e.t(t.left),c:"receiveRange"===t.title||"acceptRogin"===t.title},"receiveRange"===t.title||"acceptRogin"===t.title?e.e({d:e.unref(u)[t.title].value},e.unref(u)[t.title].value?{e:e.t(e.unref(u)[t.title].value)}:{f:e.t(t.value)},{g:e.o((e=>((e,t)=>{const[a,n,l]=t.detail.value,o=t.detail.code;u.value[e]&&(u.value[e].value="不限"!==l?l:"不限"!==n?n:"不限"!==a?a:"全国",u.value[e].postCode=o,u.value[e].fullLocation=`${n} ${l}`)})(t.title,e)),a),h:e.unref(u)[t.title].value}):e.e({i:"phone"===t.title},"phone"===t.title?{j:e.unref(u).phone,k:e.o((t=>e.unref(u).phone=t.detail.value),a)}:{}),{l:"phone"!==t.title},(t.title,{}),{m:a}))),d:e.unref(g)?1:"",e:e.o(v)})}},a=e._export_sfc(t,[["__scopeId","data-v-473ed10f"]]);wx.createComponent(a);
