"use strict";const e=require("../../common/vendor.js"),n=require("../../utils/system.js");if(!Array){(e.resolveComponent("uv-search")+e.resolveComponent("uni-transition")+e.resolveComponent("uni-icons")+e.resolveComponent("uv-empty")+e.resolveComponent("uni-load-more"))()}Math||((()=>"../../uni_modules/uv-search/components/uv-search/uv-search.js")+(()=>"../../uni_modules/uni-transition/components/uni-transition/uni-transition.js")+(()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uv-empty/components/uv-empty/uv-empty.js")+(()=>"../../uni_modules/uni-load-more/components/uni-load-more/uni-load-more.js"))();const o={__name:"search",setup(o){const r=e.ref(1500),a=e.ref(1500),u=e.ref(!1),t=e.ref({pageNum:1,pageSize:12,keyword:""}),i=e.ref([{key:1,value:"iphone1"},{key:2,value:"mate40"},{key:3,value:"iphone13"},{key:4,value:"uphone14"},{key:5,value:"vivo"},{key:6,value:"苹果"},{key:7,value:"华为"},{key:8,value:"小米"},{key:9,value:"荣耀"}]),s=()=>{u.value=!1},l=()=>{u.value=!0},v=()=>{e.index.navigateBack()},c=e.ref(e.index.getStorageSync("historySearch")||[]),d=e.ref(["iphone13","iphone14","iphone15","华为"]),f=e.ref(!1),p=e.ref(!1),m=e.ref([]),h=()=>{s(),e.index.showLoading(),t.value.keyword.trim()?(c.value=[...new Set([t.value.keyword,...c.value])].slice(0,10),console.log("historySearch.value：",c.value),c.value&&e.index.setStorageSync("historySearch",c.value),k(t.value.keyword),w(),console.log(t.value.keyword)):e.index.hideLoading()},g=e=>{k(e),h()},y=()=>{e.index.showModal({title:"是否清空历史搜索？",success:n=>{n.confirm&&(e.index.removeStorageSync("historySearch"),c.value=[])}})},w=async()=>{try{m.value.length>0&&e.index.setStorageSync("storgClassList",m.value)}finally{e.index.hideLoading()}},k=(e="")=>{m.value=[],f.value=!1,p.value=!1,t.value={pageNum:1,pageSize:12,keyword:e||""}};return e.onReachBottom((()=>{f.value||(t.value.pageNum++,w())})),e.onUnload((()=>{e.index.removeStorageSync("storgClassList",m.value)})),(o,w)=>e.e({a:e.unref(n.getStatusBarHeight)()+"px",b:e.o(v),c:e.o(h),d:e.o(l),e:e.o((n=>e.unref(t).keyword=n)),f:e.p({showAction:!0,actionText:"搜索",animation:!0,bgColor:"transparent",clearabled:!0,"height:":!0,"72rpx":!0,modelValue:e.unref(t).keyword}),g:e.unref(n.getTitleBarHeight)()+"px",h:e.unref(n.getLeftIconLeft)()+"px",i:e.f(e.unref(i),((n,o,r)=>({a:e.t(n.value),b:o,c:e.o((e=>{return o=n.value,s(),void(t.value.keyword=o);var o}),o)}))),j:e.p({"mode-class":"fade",duration:e.unref(r),show:e.unref(u)}),k:!e.unref(m).length||e.unref(p)},!e.unref(m).length||e.unref(p)?e.e({l:e.unref(c).length},e.unref(c).length?{m:e.p({type:"trash",size:"25"}),n:e.o(y),o:e.f(e.unref(c),((n,o,r)=>({a:e.t(n),b:n,c:e.o((e=>g(n)),n)})))}:{},{p:e.f(e.unref(d),((n,o,r)=>({a:e.t(n),b:n,c:e.o((e=>g(n)),n)})))}):{},{q:e.unref(p)},e.unref(p)?{r:e.p({mode:"search",icon:"http://cdn.uviewui.com/uview/empty/search.png"})}:e.e({s:e.f(e.unref(m),((e,n,o)=>({a:e.smallPicurl,b:`/pages/preview/preview?id=${e._id}`,c:e._id}))),t:e.unref(f)||e.unref(m).length},e.unref(f)||e.unref(m).length?{v:e.p({status:e.unref(f)?"noMore":"loading"})}:{}),{w:e.p({"mode-class":"slide-bottom",duration:e.unref(a),show:!e.unref(u)})})}},r=e._export_sfc(o,[["__scopeId","data-v-b11f7c8f"]]);wx.createPage(r);
